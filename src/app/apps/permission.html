<div>
    <ul class="flex space-x-2 rtl:space-x-reverse dark:text-gray-200">
        <li>
            <a href="javascript:;" class="text-primary hover:underline dark:text-gray-200">{{'hidden' | translate}}</a>
        </li>
        <li class="before:content-['/'] ltr:before:mr-2 rtl:before:ml-2 dark:text-gray-300">
            <span>{{'SETTINGS' | translate}}</span>
        </li>
    </ul>

    <div class="pt-5">
        <div class="mb-5 flex items-center justify-between">
            <h5 class="text-lg font-semibold dark:text-white-light">{{'specialdefinitions' | translate}}</h5>
        </div>
        <div
            class="mb-5 flex overflow-y-auto whitespace-nowrap border-b border-[#ebedf2] font-semibold dark:border-[#191e3a] dark:text-gray-200">
            <a href="javascript:;"
                class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary dark:hover:text-primary"
                [ngClass]="{ '!border-primary text-primary':  activeTab.toLowerCase() === 'permission'}"
                (click)="activeTab = 'permission'">
                <icon-home />
                {{'roleandpermissions' | translate}}
            </a>
            <a href="javascript:;"
                class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary dark:hover:text-primary"
                [ngClass]="{ '!border-primary text-primary':  activeTab.toLowerCase() === 'paketislem'}"
                (click)="activeTab = 'paketislem'">
                <icon-dollar-sign-circle />
                {{'packagedefinitons' | translate}}
            </a>
            <a href="javascript:;"
                class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary dark:hover:text-primary"
                [ngClass]="{ '!border-primary text-primary': activeTab.toLowerCase() === 'notification'}"
                (click)="activeTab = 'notification'">
                <icon-bell />
                {{'notification' | translate}}
            </a>
            <a href="javascript:;"
                class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary dark:hover:text-primary"
                [ngClass]="{ '!border-primary text-primary': activeTab.toLowerCase() === 'supporthours'}"
                (click)="activeTab = 'supporthours'">
                <icon-clock />
                {{'supportworkinghours' | translate}}
            </a>
        </div>


        <div *ngIf="activeTab.toLowerCase() === 'permission'">
            <div class="panel p-6 rounded-lg shadow-lg bg-white dark:bg-gray-800">
                <div class="mb-8 flex items-center justify-between">
                    <h5 class="text-2xl font-bold text-gray-800 dark:text-white">{{'roleandpermissions' | translate}}
                    </h5>
                </div>
                <div class="mb-8 space-y-4">
                    <!-- Accordion for Adding Permission -->
                    <div class="border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <button type="button"
                            class="w-full text-left p-4 text-lg font-semibold bg-gray-100 dark:bg-gray-800 dark:text-white"
                            (click)="toggleAccordion('addPermission')">
                            {{'addpermission' | translate}}
                        </button>
                        <div *ngIf="accordionOpen === 'addPermission'" class="p-6">
                            <form class="space-y-6" (ngSubmit)="addPermission()">
                                <div class="flex flex-col sm:flex-row items-start gap-4">
                                    <label for="permissionName"
                                        class="font-semibold text-gray-700 dark:text-gray-300 w-full sm:w-1/4">{{'permissionname'
                                        | translate}}</label>
                                    <input id="permissionName" type="text" [(ngModel)]="permissionName"
                                        name="permissionName" placeholder="{{'enterpermissionname' | translate}}"
                                        class="form-input w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-800 dark:border-gray-500 dark:text-white">
                                </div>
                                <div class="flex flex-col sm:flex-row items-start gap-4">
                                    <label for="permissionDescription"
                                        class="font-semibold text-gray-700 dark:text-gray-300 w-full sm:w-1/4">{{'description'
                                        | translate}}</label>
                                    <input id="permissionDescription" type="text" [(ngModel)]="permissionDescription"
                                        name="permissionDescription"
                                        placeholder="{{'enterpermissiondescription' | translate}}"
                                        class="form-input w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-800 dark:border-gray-500 dark:text-white">
                                </div>
                                <button type="submit"
                                    class="btn btn-primary w-full py-3 rounded-md bg-primary text-white hover:bg-primary-dark transition-all duration-300 ease-in-out">{{'addpermission'
                                    | translate}}</button>
                                <!-- Permission Error and Success Messages -->
                                <div *ngIf="statusMessages['permission'].error" class="text-red-500 mt-4 font-semibold">
                                    {{ statusMessages['permission'].error }}
                                </div>
                                <div *ngIf="statusMessages['permission'].success"
                                    class="text-green-500 mt-4 font-semibold">{{ statusMessages['permission'].success }}
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Accordion for Adding Role -->
                    <div class="border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <button type="button"
                            class="w-full text-left p-4 text-lg font-semibold bg-gray-100 dark:bg-gray-800 dark:text-white"
                            (click)="toggleAccordion('addRole')">
                            {{'addrole' | translate}}
                        </button>
                        <div *ngIf="accordionOpen === 'addRole'" class="p-6">
                            <form (ngSubmit)="addRole()" class="space-y-6">
                                <div class="flex flex-col sm:flex-row items-start gap-4">
                                    <label for="roleName"
                                        class="font-semibold text-gray-700 dark:text-gray-300 w-full sm:w-1/4">{{'rolename'
                                        | translate}}</label>
                                    <input id="roleName" type="text" [(ngModel)]="roleName" name="roleName"
                                        placeholder="{{'enterrolename' | translate}}"
                                        class="form-input w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-800 dark:border-gray-500 dark:text-white">
                                </div>
                                <h6 class="font-medium text-gray-700 dark:text-gray-300">{{'selectpermission' |
                                    translate}}:</h6>
                                <div class="permissions-grid mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div *ngFor="let permission of permissions" class="flex items-start space-x-2">
                                        <input type="checkbox" [id]="permission.name" [value]="permission.name"
                                            (change)="onPermissionChange($event, permission.name)"
                                            class="form-checkbox h-5 w-5 text-primary focus:ring-primary dark:bg-gray-700 dark:border-gray-500">
                                        <label [for]="permission.name"
                                            class="text-gray-700 dark:text-gray-300 font-medium flex-1">
                                            <span>{{ permission.name }}</span>
                                            <span class="block text-sm text-gray-500 dark:text-gray-400">{{
                                                permission.description }}</span>
                                        </label>
                                    </div>
                                </div>
                                <button type="submit"
                                    class="btn btn-primary w-full py-3 rounded-md bg-primary text-white hover:bg-primary-dark transition-all duration-300 ease-in-out">{{'addrole'
                                    | translate}}</button>
                                <!-- Role Error and Success Messages -->
                                <div *ngIf="statusMessages['role'].error" class="text-red-500 mt-4 font-semibold">{{
                                    statusMessages['role'].error }}</div>
                                <div *ngIf="statusMessages['role'].success" class="text-green-500 mt-4 font-semibold">{{
                                    statusMessages['role'].success }}
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Accordion for Updating Role Permissions -->
                    <div class="border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <button type="button"
                            class="w-full text-left p-4 text-lg font-semibold bg-gray-100 dark:bg-gray-800 dark:text-white"
                            (click)="toggleAccordion('updateRolePermissions')">
                            {{'updaterolepermissions' | translate}}
                        </button>
                        <div *ngIf="accordionOpen === 'updateRolePermissions'" class="p-6">
                            <form (ngSubmit)="updateRole()" class="space-y-6">
                                <div class="flex flex-col sm:flex-row items-start gap-4">
                                    <label for="roleDropdown"
                                        class="font-semibold text-gray-700 dark:text-gray-300 w-full sm:w-1/4">{{'selectarole'
                                        | translate}}</label>
                                    <select id="roleDropdown" [(ngModel)]="selectedRole" (change)="onRoleSelect($event)"
                                        name="selectedRole"
                                        class="form-select w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-800 dark:border-gray-500 dark:text-white">
                                        <option value="" disabled>{{'selectarole' | translate}}</option>
                                        <option *ngFor="let role of roles" [value]="role._id">{{ role.name }}
                                        </option>
                                    </select>
                                </div>
                                <h6 class="font-medium text-gray-700 dark:text-gray-300">{{'updatepermissions' |
                                    translate}}:</h6>
                                <div class="permissions-grid mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div *ngFor="let permission of permissions" class="flex items-start space-x-2">
                                        <input type="checkbox" [id]="permission.name" [value]="permission.name"
                                            (change)="onPermissionChange($event, permission.name)"
                                            [checked]="selectedPermissions.includes(permission.name)"
                                            class="form-checkbox h-5 w-5 text-primary focus:ring-primary dark:bg-gray-700 dark:border-gray-500">
                                        <label [for]="permission.name"
                                            class="text-gray-700 dark:text-gray-300 font-medium flex-1">
                                            <span>{{ permission.name }}</span>
                                            <span class="block text-sm text-gray-500 dark:text-gray-400">{{
                                                permission.description }}</span>
                                        </label>
                                    </div>
                                </div>
                                <button type="submit"
                                    class="btn btn-primary w-full py-3 rounded-md bg-green-600 text-white hover:bg-green-700 transition-all duration-300 ease-in-out">{{'updaterole'
                                    | translate}}</button>
                                <!-- Role Error and Success Messages -->
                                <div *ngIf="statusMessages['paket'].error" class="text-red-500 mt-4 font-semibold">
                                    {{ statusMessages['paket'].error }}</div>
                                <div *ngIf="statusMessages['paket'].success" class="text-green-500 mt-4 font-semibold">
                                    {{ statusMessages['paket'].success }}
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="activeTab.toLowerCase() === 'paketislem'">
            <div class="panel">
                <div class="mb-5 flex items-center justify-between">
                    <h5 class="text-lg font-semibold dark:text-white-light">{{'packagemanagement' | translate}}</h5>
                </div>
                <div
                    class="mb-5 flex overflow-y-auto whitespace-nowrap border-b border-[#ebedf2] font-semibold dark:border-[#191e3a] dark:text-gray-200">
                    <a href="javascript:;"
                        class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary dark:hover:text-primary"
                        [ngClass]="{ '!border-primary text-primary': activeSubTab === 'paket' }"
                        (click)="activeSubTab = 'paket'">
                        {{'package' | translate}}
                    </a>
                    <a href="javascript:;"
                        class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary dark:hover:text-primary"
                        [ngClass]="{ '!border-primary text-primary': activeSubTab === 'modul' }"
                        (click)="activeSubTab = 'modul'">
                        {{'module' | translate}}
                    </a>
                    <a href="javascript:;"
                        class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary dark:hover:text-primary"
                        [ngClass]="{ '!border-primary text-primary': activeSubTab === 'altmodul' }"
                        (click)="activeSubTab = 'altmodul'">
                        {{'submodule' | translate}}
                    </a>
                    <a href="javascript:;"
                        class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary dark:hover:text-primary"
                        [ngClass]="{ '!border-primary text-primary': activeSubTab === 'sayfa' }"
                        (click)="activeSubTab = 'sayfa'">
                        {{'page' | translate}}
                    </a>
                    <a href="javascript:;"
                        class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary dark:hover:text-primary"
                        [ngClass]="{ '!border-primary text-primary': activeSubTab === 'agac' }"
                        (click)="activeSubTab = 'agac'">
                        {{'tree' | translate}}
                    </a>
                </div>


                <div *ngIf="activeSubTab === 'paket'">
                    <!-- Paket ekleme formu -->
                    <div class="rounded border border-[#d3d3d3] dark:border-[#1b2e4b]">
                        <button type="button" class="flex w-full items-center p-4 text-white-dark dark:bg-[#1b2e4b]"
                            [ngClass]="{ '!text-primary': accordions.paketForm }" (click)="toggleAccordionPaketForm()"
                            [attr.aria-expanded]="accordions.paketForm">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5 shrink-0 text-primary ltr:mr-2 rtl:ml-2">
                                <path opacity="0.5"
                                    d="M7.142 18.9706C5.18539 18.8995 3.99998 18.6568 3.17157 17.8284C2 16.6569 2 14.7712 2 11C2 7.22876 2 5.34315 3.17157 4.17157C4.34315 3 6.22876 3 10 3H14C17.7712 3 19.6569 3 20.8284 4.17157C22 5.34315 22 7.22876 22 11C22 14.7712 22 16.6569 20.8284 17.8284C20.0203 18.6366 18.8723 18.8873 17 18.965"
                                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                <path
                                    d="M9.94955 16.0503C10.8806 15.1192 11.3461 14.6537 11.9209 14.6234C11.9735 14.6206 12.0261 14.6206 12.0787 14.6234C12.6535 14.6537 13.119 15.1192 14.0501 16.0503C16.0759 18.0761 17.0888 19.089 16.8053 19.963C16.7809 20.0381 16.7506 20.1112 16.7147 20.1815C16.2973 21 14.8648 21 11.9998 21C9.13482 21 7.70233 21 7.28489 20.1815C7.249 20.1112 7.21873 20.0381 7.19436 19.963C6.91078 19.089 7.92371 18.0761 9.94955 16.0503Z"
                                    stroke="currentColor" stroke-width="1.5" />
                            </svg>
                            <span class="flex-1">{{ 'addpaket' | translate }}</span>
                            <div class="ltr:ml-auto rtl:mr-auto" [ngClass]="{ 'rotate-180': accordions.paketForm }">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg" class="h-4 w-4">
                                    <path d="M19 9L12 15L5 9" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </div>
                        </button>
                        <div *ngIf="accordions.paketForm" class="accordion-content">
                            <div
                                class="w-full p-4 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-600">
                                <form class="space-y-5" (ngSubmit)="isUpdating ? updatePaket() : addPaket()">
                                    <div class="flex sm:flex-row flex-col">
                                        <label for="paketName"
                                            class="mb-1 sm:w-1/4 font-semibold sm:ltr:mr-2 rtl:ml-2 dark:text-gray-300">{{'paketName'
                                            | translate }}</label>
                                        <input id="paketName" type="text" [(ngModel)]="paketName" name="paketName"
                                            placeholder="{{'paketName' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>
                                    <div class="flex sm:flex-row flex-col">
                                        <label for="paketAylikFiyat"
                                            class="mb-1 sm:w-1/4 font-semibold sm:ltr:mr-2 rtl:ml-2 dark:text-gray-300">{{'paketAylikFiyat'
                                            | translate }}</label>
                                        <input id="paketAylikFiyat" type="number" [(ngModel)]="paketAylikFiyat"
                                            name="paketAylikFiyat" placeholder="{{'paketAylikFiyat' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>
                                    <div class="flex sm:flex-row flex-col">
                                        <label for="paketYillikFiyat"
                                            class="mb-1 sm:w-1/4 font-semibold sm:ltr:mr-2 rtl:ml-2 dark:text-gray-300">{{'paketYillikFiyat'
                                            | translate }}</label>
                                        <input id="paketYillikFiyat" type="number" [(ngModel)]="paketYillikFiyat"
                                            name="paketYillikFiyat" placeholder="{{'paketYillikFiyat' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>
                                    <div class="flex sm:flex-row flex-col">
                                        <label for="paketKullaniciSayisi"
                                            class="mb-1 sm:w-1/4 font-semibold sm:ltr:mr-2 rtl:ml-2 dark:text-gray-300">{{'paketKullaniciSayisi'
                                            | translate }}</label>
                                        <input id="paketKullaniciSayisi" type="number"
                                            [(ngModel)]="paketKullaniciSayisi" name="paketKullaniciSayisi"
                                            placeholder="{{'paketKullaniciSayisi' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>
                                    <div class="flex sm:flex-row flex-col">
                                        <label for="paketMagazaSayisi"
                                            class="mb-1 sm:w-1/4 font-semibold sm:ltr:mr-2 rtl:ml-2 dark:text-gray-300">{{'Paket
                                            Magaza Sayisi'
                                            | translate }}</label>
                                        <input id="paketKullaniciSayisi" type="number" [(ngModel)]="paketMagazaSayisi"
                                            name="paketMagazaSayisi"
                                            placeholder="{{'Paket Kullanici Sayisi' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>
                                    <div class="flex sm:flex-row flex-col">
                                        <label for="isActiveSelect"
                                            class="mb-1 sm:w-1/4 font-semibold sm:ltr:mr-2 rtl:ml-2 dark:text-gray-300">{{
                                            'isActive' | translate }}</label>
                                        <select id="isActiveSelect" [(ngModel)]="paketIsActive" name="paketIsActive"
                                            class="form-select flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white">
                                            <option [value]="true">{{ 'yes' | translate }}</option>
                                            <option [value]="false">{{ 'no' | translate }}</option>
                                        </select>
                                    </div>
                                    <div class="flex justify-end mt-4 space-x-2">
                                        <!-- Güncelleme veya Ekleme Butonu -->
                                        <button type="submit"
                                            class="btn btn-primary p-2 rounded-md bg-blue-500 text-white dark:bg-blue-600">
                                            {{ isUpdating ? ('update' | translate) : ('addpaket' | translate) }}
                                        </button>

                                        <!-- Yeni Paket Formu Butonu (Formu Resetlemek İçin) - Sadece Güncelleme Modunda Gösterilir -->
                                        <button type="button"
                                            class="btn btn-secondary p-2 rounded-md bg-gray-500 text-white dark:bg-gray-600 flex items-center"
                                            (click)="resetForm(true)" *ngIf="isUpdating">
                                            <icon-plus class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-plus>
                                            <!-- Yeni Paket İkonu -->
                                            {{ 'newPaket' | translate }}
                                        </button>
                                    </div>

                                    <!-- Permission Error and Success Messages -->
                                    <div *ngIf="statusMessages['paket'].error"
                                        class="text-red-500 mt-2 dark:text-red-400">{{ statusMessages['paket'].error
                                        }}</div>
                                    <div *ngIf="statusMessages['paket'].success"
                                        class="text-green-500 mt-2 dark:text-green-400">{{
                                        statusMessages['paket'].success }}</div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Paket Listesi -->
                    <div class="mt-8">
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white dark:bg-gray-800">
                                <thead>
                                    <tr>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'paketName' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'paketAylikFiyat' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'paketYillikFiyat' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'paketKullaniciSayisi' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'isActive' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'actions' | translate }}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let paket of paketler"
                                        class="border-b border-gray-200 dark:border-gray-600">
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ paket.paketAdi }}
                                        </td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ paket.aylikFiyati
                                            }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ paket.yillikFiyati
                                            }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{
                                            paket.kullaniciSayisi }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ paket.aktifmi ? (
                                            'yes' | translate ) : ( 'no' | translate ) }}</td>
                                        <td class="py-2 px-4">
                                            <button type="button" class="text-blue-500 hover:text-blue-700"
                                                (click)="editPaket(paket)">{{ 'edit' | translate }}</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>





                <!-- Package Details Tab -->
                <div *ngIf="activeSubTab === 'modul'" class="space-y-6">
                    <!-- Modul Ekleme Accordion Başlangıcı -->
                    <div class="rounded border border-[#d3d3d3] dark:border-[#1b2e4b]">
                        <button type="button" class="flex w-full items-center p-4 text-white-dark dark:bg-[#1b2e4b]"
                            [ngClass]="{ '!text-primary': accordians3 }" (click)="accordianToggle()"
                            [attr.aria-expanded]="accordians3">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5 shrink-0 text-primary ltr:mr-2 rtl:ml-2">
                                <path opacity="0.5"
                                    d="M7.142 18.9706C5.18539 18.8995 3.99998 18.6568 3.17157 17.8284C2 16.6569 2 14.7712 2 11C2 7.22876 2 5.34315 3.17157 4.17157C4.34315 3 6.22876 3 10 3H14C17.7712 3 19.6569 3 20.8284 4.17157C22 5.34315 22 7.22876 22 11C22 14.7712 22 16.6569 20.8284 17.8284C20.0203 18.6366 18.8723 18.8873 17 18.965"
                                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                <path
                                    d="M9.94955 16.0503C10.8806 15.1192 11.3461 14.6537 11.9209 14.6234C11.9735 14.6206 12.0261 14.6206 12.0787 14.6234C12.6535 14.6537 13.119 15.1192 14.0501 16.0503C16.0759 18.0761 17.0888 19.089 16.8053 19.963C16.7809 20.0381 16.7506 20.1112 16.7147 20.1815C16.2973 21 14.8648 21 11.9998 21C9.13482 21 7.70233 21 7.28489 20.1815C7.249 20.1112 7.21873 20.0381 7.19436 19.963C6.91078 19.089 7.92371 18.0761 9.94955 16.0503Z"
                                    stroke="currentColor" stroke-width="1.5" />
                            </svg>
                            <span class="flex-1">{{ 'addmodule' | translate }}</span>
                            <div class="ltr:ml-auto rtl:mr-auto" [ngClass]="{ 'rotate-180': accordians3 }">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg" class="h-4 w-4">
                                    <path d="M19 9L12 15L5 9" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </div>
                        </button>
                        <div *ngIf="accordians3" class="accordion-content p-4">
                            <div
                                class="w-full border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-600 p-6">
                                <form class="space-y-5" (ngSubmit)="isUpdating ? updateModul() : addModul()">
                                    <div class="flex flex-col md:flex-row">
                                        <label for="modulName"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{
                                            'modulName' | translate }}</label>
                                        <input id="modulName" type="text" [(ngModel)]="modulName" name="modulName"
                                            placeholder="{{ 'modulName' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>
                                    <div class="flex flex-col md:flex-row">
                                        <label for="modulKodu"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{
                                            'modulKodu' | translate }}</label>
                                        <input id="modulKodu" type="text" [(ngModel)]="modulKodu" name="modulKodu"
                                            placeholder="{{ 'modulKodu' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>
                                    <div class="flex flex-col md:flex-row">
                                        <label for="modulFiyat"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{
                                            'modulFiyat' | translate }}</label>
                                        <input id="modulFiyat" type="number" [(ngModel)]="modulFiyat" name="modulFiyat"
                                            placeholder="{{ 'modulFiyat' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>
                                    <div class="flex flex-col md:flex-row">
                                        <label for="modulYillikFiyat"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{
                                            'modulYillikFiyat' | translate }}</label>
                                        <input id="modulYillikFiyat" type="number" [(ngModel)]="modulYillikFiyat"
                                            name="modulYillikFiyat" placeholder="{{ 'modulYillikFiyat' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>
                                    <div class="flex flex-col md:flex-row">
                                        <label for="isActiveSelect"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{ 'isActive'
                                            | translate }}</label>
                                        <select id="isActiveSelect" [(ngModel)]="modulAktifmi" name="modulAktifmi"
                                            class="form-select flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white">
                                            <option [value]="true">{{ 'yes' | translate }}</option>
                                            <option [value]="false">{{ 'no' | translate }}</option>
                                        </select>
                                    </div>
                                    <div class="flex flex-col md:flex-row">
                                        <label for="isActiveSelectFree"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{
                                            'modulFreemi' | translate }}</label>
                                        <select id="isActiveSelectFree" [(ngModel)]="modulFreemi" name="modulFreemi"
                                            class="form-select flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white">
                                            <option [value]="true">{{ 'yes' | translate }}</option>
                                            <option [value]="false">{{ 'no' | translate }}</option>
                                        </select>
                                    </div>
                                    <div class="w-full mt-2">
                                        <label for="multiSelectPaket" class="mb-2 font-semibold dark:text-gray-300">{{
                                            'Select Packages' | translate }}</label>
                                        <ng-select [items]="paketler" bindLabel="paketAdi" bindValue="_id"
                                            [(ngModel)]="selectedPaketler" name="multiSelectPaket" [multiple]="true"
                                            placeholder="{{ 'Select Packages' | translate }}"
                                            class="custom-multiselect w-full">
                                        </ng-select>
                                    </div>
                                    <div class="form-group flex justify-end space-x-2 mt-4 md:col-span-2">
                                        <!-- Güncelle veya Kaydet Butonu -->
                                        <button type="submit" class="flex items-center px-6 py-2 rounded-md"
                                            [ngClass]="isUpdating ? 'btn btn-success' : 'btn btn-primary'">
                                            <icon-pencil *ngIf="isUpdating"
                                                class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-pencil>
                                            <!-- Güncelle İkonu -->
                                            <icon-save *ngIf="!isUpdating"
                                                class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-save>
                                            <!-- Kaydet İkonu -->
                                            {{ isUpdating ? ('update' | translate) : ('addmodule' | translate) }}
                                        </button>

                                        <!-- Yeni Modül Butonu -->
                                        <button *ngIf="isUpdating" type="button"
                                            class="btn btn-secondary px-6 py-2 flex items-center"
                                            (click)="resetFormModul()">
                                            <icon-plus class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-plus>
                                            <!-- Yeni Modül İkonu -->
                                            {{ 'newmodule' | translate }}
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>




                    </div>

                    <div class="rounded-lg border border-gray-200 bg-gray-50 dark:bg-gray-800 dark:border-gray-600 p-4">
                        <h6 class="text-md font-medium mb-4 dark:text-white">{{ 'Moduller' | translate }}</h6>

                        <div class="mb-5 flex flex-wrap gap-5 md:flex-row md:items-center">
                            <div class="flex items-center ltr:ml-auto rtl:mr-auto gap-4">
                                <!-- Arama Alanı -->
                                <input [(ngModel)]="searchTerm" type="text" placeholder="{{ 'search' | translate }}..."
                                    class="form-input w-64" (input)="filterModuller()" />

                                <!-- Pasifleri Göster Checkbox -->
                                <div class="flex items-center gap-2">
                                    <label class="text-sm font-medium dark:text-white-light">{{ 'showpassives' |
                                        translate }}</label>
                                    <label class="relative h-4 w-8">
                                        <input type="checkbox"
                                            class="custom_switch peer absolute z-10 h-full w-full cursor-pointer opacity-0"
                                            [(ngModel)]="showPassive" (change)="filterModuller()" />
                                        <span
                                            class="block h-full rounded-full bg-[#ebedf2] before:absolute before:bottom-0.5 before:left-0.5 before:h-3 before:w-3 before:rounded-full before:bg-white before:transition-all before:duration-300 peer-checked:bg-primary peer-checked:before:left-4"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white dark:bg-gray-800">
                                <thead>
                                    <tr>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'modulName' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'modulKodu' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'modulFiyat' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'modulYillikFiyat' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'isActive' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'Packages' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'actions' | translate }}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let modul of filteredModuller"
                                        class="border-b border-gray-200 dark:border-gray-600">
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ modul.name }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ modul.kodu }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ modul.fiyat }}
                                        </td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ modul.yillikFiyat
                                            }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ modul.aktifmi ? (
                                            'yes' | translate ) : ( 'no' | translate ) }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">
                                            <!-- Paket isimlerini liste halinde göstermek -->
                                            <div *ngFor="let paket of modul.paket">
                                                {{ paket.paketAdi }}
                                            </div>
                                        </td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">
                                            <!-- Actions (Güncelleme ve Silme Butonları) -->
                                            <button type="button" class="btn btn-sm btn-primary mr-2"
                                                (click)="editModul(modul)">
                                                <icon-pencil class="h-4 w-4"></icon-pencil> {{ 'edit' | translate }}
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>

                <div *ngIf="activeSubTab === 'altmodul'" class="space-y-6">
                    <!-- Alt Modul Ekleme Accordion Başlangıcı -->
                    <div class="rounded border border-[#d3d3d3] dark:border-[#1b2e4b]">
                        <button type="button" class="flex w-full items-center p-4 text-white-dark dark:bg-[#1b2e4b]"
                            [ngClass]="{ '!text-primary': accordiansAltModul }" (click)="accordianToggleAltModul()"
                            [attr.aria-expanded]="accordiansAltModul">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5 shrink-0 text-primary ltr:mr-2 rtl:ml-2">
                                <path opacity="0.5"
                                    d="M7.142 18.9706C5.18539 18.8995 3.99998 18.6568 3.17157 17.8284C2 16.6569 2 14.7712 2 11C2 7.22876 2 5.34315 3.17157 4.17157C4.34315 3 6.22876 3 10 3H14C17.7712 3 19.6569 3 20.8284 4.17157C22 5.34315 22 7.22876 22 11C22 14.7712 22 16.6569 20.8284 17.8284C20.0203 18.6366 18.8723 18.8873 17 18.965"
                                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                <path
                                    d="M9.94955 16.0503C10.8806 15.1192 11.3461 14.6537 11.9209 14.6234C11.9735 14.6206 12.0261 14.6206 12.0787 14.6234C12.6535 14.6537 13.119 15.1192 14.0501 16.0503C16.0759 18.0761 17.0888 19.089 16.8053 19.963C16.7809 20.0381 16.7506 20.1112 16.7147 20.1815C16.2973 21 14.8648 21 11.9998 21C9.13482 21 7.70233 21 7.28489 20.1815C7.249 20.1112 7.21873 20.0381 7.19436 19.963C6.91078 19.089 7.92371 18.0761 9.94955 16.0503Z"
                                    stroke="currentColor" stroke-width="1.5" />
                            </svg>
                            <span class="flex-1">{{ 'addsubmodule' | translate }}</span>
                            <div class="ltr:ml-auto rtl:mr-auto" [ngClass]="{ 'rotate-180': accordiansAltModul }">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg" class="h-4 w-4">
                                    <path d="M19 9L12 15L5 9" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </div>
                        </button>
                        <div *ngIf="accordiansAltModul" class="accordion-content p-4">
                            <div
                                class="w-full border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-600 p-6">
                                <form class="space-y-5" (ngSubmit)="isAltUpdating ? updateAltModul() : addAltModul()">
                                    <div class="flex flex-col md:flex-row">
                                        <label for="altModulName"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">
                                            {{ 'altModulName' | translate }}
                                        </label>
                                        <input id="altModulName" type="text" [(ngModel)]="altModulName"
                                            name="altModulName" placeholder="{{ 'altModulName' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>
                                    <div class="w-full mt-2">
                                        <label for="multiSelectModul" class="mb-2 font-semibold dark:text-gray-300">
                                            {{ 'Select Modul' | translate }}
                                        </label>
                                        <ng-select [items]="moduller" bindLabel="name" bindValue="_id"
                                            [(ngModel)]="selectedModuller" name="multiSelectModul" [multiple]="true"
                                            placeholder="{{ 'Select Modul' | translate }}"
                                            class="custom-multiselect w-full">
                                        </ng-select>
                                    </div>
                                    <div class="form-group flex justify-end space-x-2 mt-4 md:col-span-2">
                                        <!-- Güncelle veya Kaydet Butonu -->
                                        <button type="submit" class="flex items-center px-6 py-2 rounded-md"
                                            [ngClass]="isAltUpdating ? 'btn btn-success' : 'btn btn-primary'">
                                            <icon-pencil *ngIf="isAltUpdating"
                                                class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-pencil>
                                            <icon-save *ngIf="!isAltUpdating"
                                                class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-save>
                                            {{ isAltUpdating ? ('update' | translate) : ('addsubmodule' | translate) }}
                                        </button>

                                        <!-- Yeni Alt Modül Butonu -->
                                        <button *ngIf="isAltUpdating" type="button"
                                            class="btn btn-secondary px-6 py-2 flex items-center"
                                            (click)="resetFormAltModul()">
                                            <icon-plus class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-plus>
                                            {{ 'newaltmodule' | translate }}
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Alt Moduller Tablosu -->
                    <div class="rounded-lg border border-gray-200 bg-gray-50 dark:bg-gray-800 dark:border-gray-600 p-4">
                        <h6 class="text-md font-medium mb-4 dark:text-white">{{ 'Alt Moduller' | translate }}</h6>

                        <div class="mb-5 flex flex-wrap gap-5 md:flex-row md:items-center">
                            <div class="flex items-center ltr:ml-auto rtl:mr-auto gap-4">
                                <!-- Arama Alanı -->
                                <input [(ngModel)]="searchTermAltModul" type="text"
                                    placeholder="{{ 'search' | translate }}..." class="form-input w-64"
                                    (input)="filterAltModuller()" />

                                <!-- Pasifleri Göster Checkbox -->
                                <div class="flex items-center gap-2">
                                    <label class="text-sm font-medium dark:text-white-light">{{ 'showpassives' |
                                        translate }}</label>
                                    <label class="relative h-4 w-8">
                                        <input type="checkbox"
                                            class="custom_switch peer absolute z-10 h-full w-full cursor-pointer opacity-0"
                                            [(ngModel)]="showAltPassive" (change)="filterAltModuller()" />
                                        <span
                                            class="block h-full rounded-full bg-[#ebedf2] before:absolute before:bottom-0.5 before:left-0.5 before:h-3 before:w-3 before:rounded-full before:bg-white before:transition-all before:duration-300 peer-checked:bg-primary peer-checked:before:left-4"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white dark:bg-gray-800">
                                <thead>
                                    <tr>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'altModulName' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'Moduller' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'actions' | translate }}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let altModul of filteredAltModuller"
                                        class="border-b border-gray-200 dark:border-gray-600">
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ altModul.name }}
                                        </td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">
                                            <!-- Modul isimlerini liste halinde göstermek -->
                                            <div *ngFor="let modul of altModul.modul">
                                                {{ modul.name }}
                                            </div>
                                        </td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">
                                            <!-- Actions (Güncelleme ve Silme Butonları) -->
                                            <button type="button" class="btn btn-sm btn-primary mr-2"
                                                (click)="editAltModul(altModul)">
                                                <icon-pencil class="h-4 w-4"></icon-pencil> {{ 'edit' | translate }}
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>



                <div *ngIf="activeSubTab === 'sayfa'" class="space-y-6">

                    <!-- Sayfa Ekleme Accordion Başlangıcı -->
                    <div class="rounded border border-[#d3d3d3] dark:border-[#1b2e4b]">
                        <button type="button" class="flex w-full items-center p-4 text-white-dark dark:bg-[#1b2e4b]"
                            [ngClass]="{ '!text-primary': accordiansSayfa }"
                            (click)="accordianToggleSayfa(!accordiansSayfa)" [attr.aria-expanded]="accordiansSayfa">
                            <span class="flex-1">{{ 'addpage' | translate }}</span>
                            <div class="ltr:ml-auto rtl:mr-auto" [ngClass]="{ 'rotate-180': accordiansSayfa }">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg" class="h-4 w-4">
                                    <path d="M19 9L12 15L5 9" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </div>
                        </button>

                        <div *ngIf="accordiansSayfa" class="accordion-content p-4">
                            <div
                                class="w-full border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-600 p-6">
                                <form class="space-y-5" (ngSubmit)="isSayfaUpdating ? updateSayfa() : addSayfa()">

                                    <div class="flex flex-col md:flex-row">
                                        <label for="sayfaName"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{
                                            'sayfaName' | translate }}</label>
                                        <input id="sayfaName" type="text" [(ngModel)]="sayfaName" name="sayfaName"
                                            placeholder="{{ 'sayfaName' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>

                                    <div class="flex flex-col md:flex-row">
                                        <label for="sayfaKod"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{ 'sayfaKod'
                                            | translate }}</label>
                                        <input id="sayfaKod" type="text" [(ngModel)]="sayfaKod" name="sayfaKod"
                                            placeholder="{{ 'sayfaKod' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>

                                    <div class="flex flex-col md:flex-row">
                                        <label for="sayfaFiyat"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{
                                            'sayfaFiyat' | translate }}</label>
                                        <input id="sayfaFiyat" type="number" [(ngModel)]="sayfaFiyat" name="sayfaFiyat"
                                            placeholder="{{ 'sayfaFiyat' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>

                                    <div class="flex flex-col md:flex-row">
                                        <label for="sayfaYillikFiyat"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{
                                            'sayfaYillikFiyat' | translate }}</label>
                                        <input id="sayfaYillikFiyat" type="number" [(ngModel)]="sayfaYillikFiyat"
                                            name="sayfaYillikFiyat" placeholder="{{ 'sayfaYillikFiyat' | translate }}"
                                            class="form-input flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white" />
                                    </div>

                                    <div class="flex flex-col md:flex-row">
                                        <label for="isActiveSelect"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{ 'isActive'
                                            | translate }}</label>
                                        <select id="isActiveSelect" [(ngModel)]="sayfaAktifmi" name="sayfaAktifmi"
                                            class="form-select flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white">
                                            <option [value]="true">{{ 'yes' | translate }}</option>
                                            <option [value]="false">{{ 'no' | translate }}</option>
                                        </select>
                                    </div>

                                    <div class="flex flex-col md:flex-row">
                                        <label for="paketeDahilmi"
                                            class="md:w-1/4 mb-1 md:mr-4 font-semibold dark:text-gray-300">{{
                                            'paketeDahilmi' | translate }}</label>
                                        <select id="paketeDahilmi" [(ngModel)]="sayfaPaketeDahilmi" name="paketeDahilmi"
                                            class="form-select flex-1 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white">
                                            <option [value]="true">{{ 'yes' | translate }}</option>
                                            <option [value]="false">{{ 'no' | translate }}</option>
                                        </select>
                                    </div>

                                    <div class="w-full mt-2">
                                        <label for="multiSelectAltModul"
                                            class="mb-2 font-semibold dark:text-gray-300">{{ 'Select Alt Modules' |
                                            translate }}</label>
                                        <ng-select [items]="altModuller" bindLabel="name" bindValue="_id"
                                            [(ngModel)]="selectedAltModuller" name="multiSelectAltModul"
                                            [multiple]="true" placeholder="{{ 'Select Alt Modules' | translate }}"
                                            class="custom-multiselect w-full">
                                        </ng-select>
                                    </div>


                                    <div class="w-full mt-2">
                                        <label for="multiSelectRoller" class="mb-2 font-semibold dark:text-gray-300">{{
                                            'Select Role Modules' | translate }}</label>
                                        <ng-select [items]="roles" bindLabel="name" bindValue="_id"
                                            [(ngModel)]="selectedRoller" name="multiSelectRoller" [multiple]="true"
                                            placeholder="{{ 'Select Role Modules' | translate }}"
                                            class="custom-multiselect w-full">
                                        </ng-select>
                                    </div>
                                    <div class="form-group flex justify-end space-x-2 mt-4 md:col-span-2">
                                        <button type="submit" class="flex items-center px-6 py-2 rounded-md"
                                            [ngClass]="isSayfaUpdating ? 'btn btn-success' : 'btn btn-primary'">
                                            <icon-pencil *ngIf="isSayfaUpdating"
                                                class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-pencil>
                                            <icon-save *ngIf="!isSayfaUpdating"
                                                class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-save>
                                            {{ isSayfaUpdating ? ('update' | translate) : ('addpage' | translate) }}
                                        </button>

                                        <button *ngIf="isSayfaUpdating" type="button"
                                            class="btn btn-secondary px-6 py-2 flex items-center"
                                            (click)="resetFormSayfa()">
                                            <icon-plus class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-plus>
                                            {{ 'newpage' | translate }}
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Sayfa Listesi -->
                    <!-- Sayfa Listesi -->
                    <div class="rounded-lg border border-gray-200 bg-gray-50 dark:bg-gray-800 dark:border-gray-600 p-4">
                        <h6 class="text-md font-medium mb-4 dark:text-white">{{ 'Sayfalar' | translate }}</h6>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white dark:bg-gray-800">
                                <thead>
                                    <tr>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'sayfaName' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'sayfaKod' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'sayfaFiyat' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'sayfaYillikFiyat' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'isActive' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'paketeDahilmi' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'Alt Moduller' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'Roller' | translate }}</th>
                                        <th
                                            class="py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-left font-semibold text-gray-700 dark:text-gray-300">
                                            {{ 'actions' | translate }}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let sayfa of filteredSayfalar"
                                        class="border-b border-gray-200 dark:border-gray-600">
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ sayfa.name }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ sayfa.kod }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ sayfa.fiyat }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ sayfa.yillikFiyat }}
                                        </td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ sayfa.aktifmi ? (
                                            'yes' | translate ) : ( 'no' | translate ) }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ sayfa.paketeDahilmi ?
                                            ( 'yes' | translate ) : ( 'no' | translate ) }}</td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">
                                            <div *ngFor="let altModul of sayfa.altModul">
                                                {{ altModul.name }}
                                            </div>
                                        </td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">
                                            <div *ngFor="let role of sayfa.roller">
                                                {{ role.name }}
                                            </div>
                                        </td>
                                        <td class="py-2 px-4 text-gray-800 dark:text-gray-300">
                                            <button type="button" class="btn btn-sm btn-primary mr-2"
                                                (click)="editSayfa(sayfa)">
                                                <icon-pencil class="h-4 w-4"></icon-pencil> {{ 'edit' | translate }}
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>



                <div *ngIf="activeSubTab === 'agac'" class="space-y-6">
                    <div class="rounded border border-[#d3d3d3] dark:border-[#1b2e4b] dark:bg-gray-800">
                        <div>
                            <div class="grid grid-cols-1 gap-6 pt-5 lg:grid-cols-2">
                                <div class="panel dark:bg-gray-800 dark:text-gray-200">
                                    <div class="mb-5 flex items-center justify-between">
                                        <h5 class="text-lg font-semibold dark:text-white-light">{{ 'treeviewstructure' |
                                            translate }}</h5>
                                    </div>
                                    <div class="mb-5">
                                        <ul class="font-semibold">
                                            <li *ngFor="let paket of treeData"
                                                class="py-[5px] flex items-center justify-between">
                                                <div>
                                                    <button type="button" (click)="toggleTreeview1(paket._id)">
                                                        <icon-caret-down
                                                            [class]="'w-5 h-5 text-primary inline relative -top-1 ltr:mr-2 rtl:ml-2 ' + [treeview1.includes(paket._id) ? 'rotate-180' : '']">
                                                        </icon-caret-down>
                                                        <icon-folder
                                                            class="relative -top-1 inline text-primary ltr:mr-2 rtl:ml-2"></icon-folder>
                                                        {{ paket.paketAdi }}
                                                    </button>
                                                </div>
                                                <button type="button" class="btn btn-primary px-3 py-1"
                                                    (click)="assignUsersToPaket(paket._id)">
                                                    {{ 'Kullanıcılara Ata' | translate }}
                                                </button>
                                                <div [@slideDownUp]="!treeview1.includes(paket._id)"
                                                    class="accordion-content">
                                                    <ul class="ltr:pl-14 rtl:pr-14">
                                                        <li *ngFor="let modul of paket.moduller"
                                                            class="py-[5px] dark:text-gray-300">
                                                            <button type="button" (click)="toggleTreeview1(modul._id)">
                                                                <icon-caret-down
                                                                    [class]="'w-5 h-5 text-primary inline relative -top-1 ltr:mr-2 rtl:ml-2 ' + [treeview1.includes(modul._id) ? 'rotate-180' : '']">
                                                                </icon-caret-down>
                                                                <icon-folder
                                                                    class="relative -top-1 inline text-primary ltr:mr-2 rtl:ml-2"></icon-folder>
                                                                {{ modul.name }}
                                                            </button>
                                                            <div [@slideDownUp]="!treeview1.includes(modul._id)"
                                                                class="accordion-content">
                                                                <ul class="ltr:pl-14 rtl:pr-14">
                                                                    <li *ngFor="let altModul of modul.altModuller"
                                                                        class="py-[5px] dark:text-gray-300">
                                                                        <button type="button"
                                                                            (click)="toggleTreeview1(altModul._id)">
                                                                            <icon-caret-down
                                                                                [class]="'w-5 h-5 text-primary inline relative -top-1 ltr:mr-2 rtl:ml-2 ' + [treeview1.includes(altModul._id) ? 'rotate-180' : '']">
                                                                            </icon-caret-down>
                                                                            <icon-folder
                                                                                class="relative -top-1 inline text-primary ltr:mr-2 rtl:ml-2"></icon-folder>
                                                                            {{ altModul.name }}
                                                                        </button>
                                                                        <div [@slideDownUp]="!treeview1.includes(altModul._id)"
                                                                            class="accordion-content">
                                                                            <ul class="ltr:pl-14 rtl:pr-14">
                                                                                <li *ngFor="let sayfa of altModul.sayfalar"
                                                                                    class="py-[5px] ltr:pl-8 rtl:pr-8 dark:text-gray-300">
                                                                                    <icon-txt-file
                                                                                        class="inline h-4.5 w-4.5 text-primary ltr:mr-2 rtl:ml-2"></icon-txt-file>
                                                                                    {{ sayfa.name }}
                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
        <!-- Notification Tab Content -->
        <div *ngIf="activeTab.toLowerCase() === 'notification'">
            <div class="panel p-6 rounded-lg shadow-lg bg-white dark:bg-gray-800">
                <div class="mb-8 flex items-center justify-between">
                    <h5 class="text-2xl font-bold text-gray-800 dark:text-white">{{'notification' | translate}}</h5>
                </div>
                <form class="space-y-6" (ngSubmit)="sendNotification()">
                    <div class="flex flex-col sm:flex-row items-start gap-4">
                        <label for="notificationMessage"
                            class="font-semibold text-gray-700 dark:text-gray-300 w-full sm:w-1/4">{{'message'
                            | translate}}</label>
                        <textarea id="notificationMessage" [(ngModel)]="notificationMessage" name="notificationMessage"
                            placeholder="{{'entermessage' | translate}}"
                            class="form-input w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-800 dark:border-gray-500 dark:text-white">
                </textarea>
                    </div>
                    <button type="submit"
                        class="btn btn-primary w-full py-3 rounded-md bg-primary text-white hover:bg-primary-dark transition-all duration-300 ease-in-out">
                        {{'send' | translate}}
                    </button>
                </form>
            </div>
        </div>

        <div *ngIf="activeTab.toLowerCase() === 'supporthours'">
            <div class="panel p-6 rounded-lg shadow-lg bg-white dark:bg-gray-800">
                <div class="mb-8 flex items-center justify-between">
                    <h5 class="text-2xl font-bold text-gray-800 dark:text-white">{{ 'supportworkinghours' | translate }}
                    </h5>
                </div>

                <!-- Destek Saatlerini Listeleme -->
                <div class="mb-4">
                    <table class="min-w-full bg-white dark:bg-gray-800">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 text-left font-semibold text-gray-700 dark:text-gray-300">{{ 'day'
                                    | translate }}</th>
                                <th class="py-2 px-4 text-left font-semibold text-gray-700 dark:text-gray-300">{{
                                    'starttime' | translate }}</th>
                                <th class="py-2 px-4 text-left font-semibold text-gray-700 dark:text-gray-300">{{
                                    'endtime' | translate }}</th>
                                <th class="py-2 px-4 text-left font-semibold text-gray-700 dark:text-gray-300">{{
                                    'isactive' | translate }}</th>
                                <th class="py-2 px-4 text-left font-semibold text-gray-700 dark:text-gray-300">{{
                                    'actions' | translate }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let hour of supportHours">
                                <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ hour.dayOfWeek }}</td>
                                <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ hour.startTime }}</td>
                                <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ hour.endTime }}</td>
                                <td class="py-2 px-4 text-gray-800 dark:text-gray-300">{{ hour.isActive ? ('yes' |
                                    translate) : ('no' | translate) }}</td>
                                <td class="py-2 px-4 text-gray-800 dark:text-gray-300">
                                    <!-- Düzenle Butonu -->
                                    <button type="button" class="btn btn-primary" (click)="editSupportHour(hour)">
                                        {{ 'edit' | translate }}
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Destek Saatleri Eklemek İçin Form -->
                <form (ngSubmit)="isUpdatingsupport ? updateSupportHour() : addSupportHour()">
                    <div class="flex flex-col sm:flex-row items-start gap-4">
                        <label for="days" class="font-semibold text-gray-700 dark:text-gray-300 w-full sm:w-1/4">
                            {{ 'selectdays' | translate }}
                        </label>
                        <select id="days" [(ngModel)]="selectedDay" name="days"
                            class="form-select w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white">
                            <option *ngFor="let day of weekDays" [value]="day">{{ day }}</option>
                        </select>
                    </div>
                    <div class="flex flex-col sm:flex-row items-start gap-4">
                        <label for="startTime" class="font-semibold text-gray-700 dark:text-gray-300 w-full sm:w-1/4">{{
                            'starttime' | translate }}</label>
                        <input id="startTime" type="time" [(ngModel)]="newSupportHour.startTime" name="startTime"
                            class="form-input w-full p-3 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white"
                            required>
                    </div>
                    <div class="flex flex-col sm:flex-row items-start gap-4">
                        <label for="endTime" class="font-semibold text-gray-700 dark:text-gray-300 w-full sm:w-1/4">{{
                            'endtime' | translate }}</label>
                        <input id="endTime" type="time" [(ngModel)]="newSupportHour.endTime" name="endTime"
                            class="form-input w-full p-3 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-500 dark:text-white"
                            required>
                    </div>
                    <div class="flex justify-end mt-4">
                        <button type="submit"
                            class="btn btn-primary w-full py-3 rounded-md bg-primary text-white hover:bg-primary-dark transition-all duration-300 ease-in-out">
                            {{ isUpdatingsupport ? ('updateSupportHour' | translate) : ('addSupportHour' | translate) }}
                        </button>
                    </div>
                </form>
            </div>
        </div>



    </div>
</div>
