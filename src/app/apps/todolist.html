<div>
    <div class="relative flex h-full gap-5 sm:h-[calc(100vh_-_150px)] dark:bg-gray-900 dark:text-gray-200">
        <!-- Görev Listesi Paneli -->
        <div class="panel absolute z-10 hidden h-full w-[240px] max-w-full flex-none space-y-4 p-4 ltr:rounded-r-none rtl:rounded-l-none xl:relative xl:block xl:h-auto ltr:xl:rounded-r-md rtl:xl:rounded-l-md
            dark:bg-gray-800 dark:border-gray-700"
            [ngClass]="{ '!block': isShowTaskMenu }">
            <div class="flex h-full flex-col pb-16">
                <div class="pb-5">
                    <div class="flex items-center text-center">
                        <div class="shrink-0 dark:text-gray-200">
                            <icon-clipboard-text />
                        </div>
                        <h3 class="text-lg font-semibold ltr:ml-3 rtl:mr-3 dark:text-gray-100">{{ 'todolist' | translate }}</h3>
                    </div>
                </div>
                <div class="mb-5 h-px w-full border-b border-[#e0e6ed] dark:border-gray-600"></div>
                <ng-scrollbar class="relative h-full grow ltr:pr-3.5 rtl:pl-3.5" appearance="compact">
                    <div class="space-y-1">
                        <!-- Tabs -->
                        <button type="button"
                            class="flex h-10 w-full items-center justify-between rounded-md p-2 font-medium hover:bg-white-dark/10 hover:text-primary dark:hover:bg-[#181F32] dark:hover:text-primary"
                            [ngClass]="{ 'bg-gray-100 dark:bg-[#181F32] dark:text-primary text-primary': selectedTab === 'Yeni Açıldı' }"
                            (click)="tabChanged('Yeni Açıldı')">
                            <div class="flex items-center">
                                <icon-list-check class="h-4.5 w-4.5 shrink-0 dark:text-gray-200" />
                                <div class="ltr:ml-3 rtl:mr-3">{{ 'Yeni Açıldı' | translate }}</div>
                            </div>
                            <div class="whitespace-nowrap rounded-md bg-primary-light px-2 py-0.5 font-semibold dark:bg-[#060818]">
                                {{ getTasksLength('Yeni Açıldı') }}
                            </div>
                        </button>

                        <button type="button"
                            class="flex h-10 w-full items-center justify-between rounded-md p-2 font-medium hover:bg-white-dark/10 hover:text-primary dark:hover:bg-[#181F32] dark:hover:text-primary"
                            [ngClass]="{ 'bg-gray-100 dark:bg-[#181F32] dark:text-primary text-primary': selectedTab === 'Tamamlandı' }"
                            (click)="tabChanged('Tamamlandı')">
                            <div class="flex items-center">
                                <icon-thumb-up class="h-5 w-5 shrink-0 dark:text-gray-200" />
                                <div class="ltr:ml-3 rtl:mr-3">{{ 'Tamamlandı' | translate }}</div>
                            </div>
                            <div class="whitespace-nowrap rounded-md bg-primary-light px-2 py-0.5 font-semibold dark:bg-[#060818]">
                                {{ getTasksLength('Tamamlandı') }}
                            </div>
                        </button>

                        <button type="button"
                            class="flex h-10 w-full items-center justify-between rounded-md p-2 font-medium hover:bg-white-dark/10 hover:text-primary dark:hover:bg-[#181F32] dark:hover:text-primary"
                            [ngClass]="{ 'bg-gray-100 dark:bg-[#181F32] dark:text-primary text-primary': selectedTab === 'Test' }"
                            (click)="tabChanged('Test')">
                            <div class="flex items-center">
                                <icon-star class="shrink-0 dark:text-gray-200" />

                                <div class="ltr:ml-3 rtl:mr-3">{{ 'Test' | translate }}</div>
                            </div>
                            <div class="whitespace-nowrap rounded-md bg-primary-light px-2 py-0.5 font-semibold dark:bg-[#060818]">
                                {{ getTasksLength('Test') }}
                            </div>
                        </button>

                        <button type="button"
                            class="flex h-10 w-full items-center justify-between rounded-md p-2 font-medium hover:bg-white-dark/10 hover:text-primary dark:hover:bg-[#181F32] dark:hover:text-primary"
                            [ngClass]="{ 'bg-gray-100 dark:bg-[#181F32] dark:text-primary text-primary': selectedTab === 'Bana Atanan' }"
                            (click)="tabChanged('Bana Atanan')">
                            <div class="flex items-center">
                                <icon-user class="shrink-0 dark:text-gray-200" />
                                <div class="ltr:ml-3 rtl:mr-3">{{ 'Bana Atanan' | translate }}</div>
                            </div>
                            <div
                                class="whitespace-nowrap rounded-md bg-primary-light px-2 py-0.5 font-semibold dark:bg-[#060818]">
                                {{ getAssignedTasksCount() }}
                            </div>
                        </button>

                        <button type="button"
                            class="flex h-10 w-full items-center justify-between rounded-md p-2 font-medium hover:bg-white-dark/10 hover:text-primary dark:hover:bg-[#181F32] dark:hover:text-primary"
                            [ngClass]="{ 'bg-gray-100 dark:bg-[#181F32] dark:text-primary text-primary': selectedTab === 'İptal Edildi' }"
                            (click)="tabChanged('İptal Edildi')">
                            <div class="flex items-center">
                                <icon-trash-lines class="shrink-0 dark:text-gray-200" />

                                <div class="ltr:ml-3 rtl:mr-3">{{ 'İptal Edildi' | translate }}</div>
                            </div>
                        </button>
                        <div class="h-px w-full border-b border-[#e0e6ed] dark:border-gray-600"></div>
                        <div class="px-1 py-3 text-white-dark dark:text-gray-400">{{ 'tags' | translate }}</div>


                        <!-- İyileştirme Butonu (Yeşil) -->
                        <button type="button"
                            class="flex h-10 w-full items-center rounded-md p-1 font-medium text-green-600 duration-300 hover:bg-green-100 ltr:hover:pl-3 rtl:hover:pr-3 dark:hover:bg-green-800"
                            [ngClass]="{ 'ltr:pl-3 rtl:pr-3 bg-gray-100 dark:bg-green-900': selectedTab === 'İyileştirme' }"
                            (click)="tabChanged('İyileştirme')">
                            <icon-square-rotated class="shrink-0 fill-green-600" />
                            <div class="ltr:ml-3 rtl:mr-3 dark:text-gray-100">{{ 'İyileştirme' | translate }}</div>
                        </button>


                        <!-- Geliştirme Butonu (Mavi) -->
                        <button type="button"
                            class="flex h-10 w-full items-center rounded-md p-1 font-medium text-blue-600 duration-300 hover:bg-blue-100 ltr:hover:pl-3 rtl:hover:pr-3 dark:hover:bg-blue-800"
                            [ngClass]="{ 'ltr:pl-3 rtl:pr-3 bg-gray-100 dark:bg-blue-900': selectedTab === 'Geliştirme' }"
                            (click)="tabChanged('Geliştirme')">
                            <icon-square-rotated class="shrink-0 fill-blue-600" />
                            <div class="ltr:ml-3 rtl:mr-3 dark:text-gray-100">{{ 'Geliştirme' | translate }}</div>
                        </button>

                        <!-- Hata Butonu (Kırmızı) -->
                        <button type="button"
                            class="flex h-10 w-full items-center rounded-md p-1 font-medium text-red-600 duration-300 hover:bg-red-100 ltr:hover:pl-3 rtl:hover:pr-3 dark:hover:bg-red-800"
                            [ngClass]="{ 'ltr:pl-3 rtl:pr-3 bg-gray-100 dark:bg-red-900': selectedTab === 'Hata' }"
                            (click)="tabChanged('Hata')">
                            <icon-square-rotated class="shrink-0 fill-red-600" />
                            <div class="ltr:ml-3 rtl:mr-3 dark:text-gray-100">{{ 'Hata' | translate }}</div>
                        </button>

                        <div class="h-px w-full border-b border-[#e0e6ed] dark:border-gray-600"></div>
                        <div class="px-1 py-3 text-white-dark dark:text-gray-400">{{ 'Önem Derecesi' | translate }}</div>

                        <!-- Düşük -->
                        <button type="button"
                            class="flex h-10 w-full items-center rounded-md p-1 font-medium text-green-600 duration-300 hover:bg-green-100 ltr:hover:pl-3 rtl:hover:pr-3 dark:hover:bg-green-800"
                            [ngClass]="{ 'ltr:pl-3 rtl:pr-3 bg-gray-100 dark:bg-green-900': selectedTab === 'Düşük' }"
                            (click)="tabChanged('Düşük')">
                            <icon-square-rotated class="shrink-0 fill-green-600" />
                            <div class="ltr:ml-3 rtl:mr-3 dark:text-gray-100">{{ 'Düşük' | translate }}</div>
                        </button>

                        <!-- Orta -->
                        <button type="button"
                            class="flex h-10 w-full items-center rounded-md p-1 font-medium text-blue-600 duration-300 hover:bg-blue-100 ltr:hover:pl-3 rtl:hover:pr-3 dark:hover:bg-blue-800"
                            [ngClass]="{ 'ltr:pl-3 rtl:pr-3 bg-gray-100 dark:bg-blue-900': selectedTab === 'Orta' }"
                            (click)="tabChanged('Orta')">
                            <icon-square-rotated class="shrink-0 fill-blue-600" />
                            <div class="ltr:ml-3 rtl:mr-3 dark:text-gray-100">{{ 'Orta' | translate }}</div>
                        </button>

                        <!-- Yüksek -->
                        <button type="button"
                            class="flex h-10 w-full items-center rounded-md p-1 font-medium text-red-600 duration-300 hover:bg-red-100 ltr:hover:pl-3 rtl:hover:pr-3 dark:hover:bg-red-800"
                            [ngClass]="{ 'ltr:pl-3 rtl:pr-3 bg-gray-100 dark:bg-red-900': selectedTab === 'Yüksek' }"
                            (click)="tabChanged('Yüksek')">
                            <icon-square-rotated class="shrink-0 fill-red-600" />
                            <div class="ltr:ml-3 rtl:mr-3 dark:text-gray-100">{{ 'Yüksek' | translate }}</div>
                        </button>

                    </div>
                </ng-scrollbar>
                <div class="absolute bottom-0 w-full p-4 ltr:left-0 rtl:right-0">
                    <button class="btn btn-primary w-full" type="button" (click)="addEditTask()">
                        <icon-plus class="shrink-0 ltr:mr-2 rtl:ml-2" />
                        {{ 'addnewtask' | translate }}
                    </button>
                </div>
            </div>
        </div>
        <div class="overlay absolute z-[5] hidden h-full w-full rounded-md bg-black/60"
            [ngClass]="{ '!block xl:!hidden': isShowTaskMenu }" (click)="isShowTaskMenu = !isShowTaskMenu"></div>
        <div class="panel h-full flex-1 overflow-auto p-0 dark:bg-gray-900 dark:text-gray-200">
            <div class="flex h-full flex-col">
                <div class="flex w-full flex-col gap-4 p-4 sm:flex-row sm:items-center">
                    <div class="flex items-center ltr:mr-3 rtl:ml-3">
                        <button type="button" class="block hover:text-primary ltr:mr-3 rtl:ml-3 xl:hidden dark:text-gray-200"
                            (click)="isShowTaskMenu = !isShowTaskMenu">
                            <icon-menu />
                        </button>
                        <div class="group relative flex-1">
                            <input type="text" class="peer form-input ltr:!pr-10 rtl:!pl-10 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                placeholder="{{ 'searchtask' | translate }}..." name="searchTask"
                                [(ngModel)]="searchTask" (ngModelChange)="searchTasks()" />
                            <div
                                class="absolute top-1/2 -translate-y-1/2 peer-focus:text-primary ltr:right-[11px] rtl:left-[11px] dark:text-gray-200">
                                <icon-search />
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-1 items-center justify-center sm:flex-auto sm:justify-end">
                        <p class="ltr:mr-3 rtl:ml-3 dark:text-gray-200">{{ pager.startIndex + 1 + '-' + (pager.endIndex + 1) + ' of ' +
                            filteredTasks.length }}</p>
                        <button type="button" [disabled]="pager.currentPage == 1"
                            class="rounded-md bg-[#f4f4f4] p-1 enabled:hover:bg-primary-light disabled:cursor-not-allowed disabled:opacity-60 ltr:mr-3 rtl:ml-3 dark:bg-white-dark/20 enabled:dark:hover:bg-white-dark/30 dark:text-gray-200"
                            (click)="pager.currentPage = pager.currentPage - 1; searchTasks(false)">
                            <icon-caret-down class="h-5 w-5 rotate-90 rtl:-rotate-90" />
                        </button>
                        <button type="button" [disabled]="pager.currentPage == pager.totalPages"
                            class="rounded-md bg-[#f4f4f4] p-1 enabled:hover:bg-primary-light disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white-dark/20 enabled:dark:hover:bg-white-dark/30 dark:text-gray-200"
                            (click)="pager.currentPage = pager.currentPage + 1; searchTasks(false)">
                            <icon-caret-down class="h-5 w-5 -rotate-90 rtl:rotate-90" />
                        </button>
                    </div>
                </div>
                <div class="h-px w-full border-b border-[#e0e6ed] dark:border-gray-600"></div>
                <ng-container *ngIf="pagedTasks.length">
                    <div class="table-responsive min-h-[400px] grow overflow-y-auto sm:min-h-[300px]">
                        <table class="table-hover dark:text-gray-200">
                            <tbody>
                                <ng-container *ngFor="let task of pagedTasks">
                                    <tr class="group cursor-pointer"
                                        [ngClass]="{ 'bg-white-light/30 dark:bg-[#1a2941]': task.status === 'complete' }">
                                        <td>
                                            <div (click)="viewTask(task)">
                                                <div class="whitespace-nowrap text-base font-semibold group-hover:text-primary dark:group-hover:text-primary"
                                                    [ngClass]="{ 'line-through': task.statu === 'Tamamlandı', 'dark:text-gray-100': true }">
                                                    {{ task.title }}
                                                </div>
                                                <div class="line-clamp-1 min-w-[300px] overflow-hidden text-white-dark dark:text-gray-400"
                                                    [ngClass]="{ 'line-through': task.statu === 'Tamamlandı' }">
                                                    {{ task.aciklama }}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-1">
                                            <p class="whitespace-nowrap font-medium text-white-dark dark:text-gray-300"
                                                [ngClass]="{ 'line-through': task.statu === 'Tamamlandı' }">
                                                {{ getRemainingTime(task.hedefTarihi) }}
                                            </p>
                                        </td>
                                        <td class="w-1">
                                            <div
                                                class="flex items-center space-x-2 ltr:justify-end rtl:justify-start rtl:space-x-reverse">
                                                <ng-container *ngIf="task.onemDerecesi">
                                                    <div class="badge rounded-full capitalize"
                                                        [ngClass]="{
                                                            'text-white bg-success': task.onemDerecesi === 'Düşük',
                                                            'text-white bg-info': task.onemDerecesi === 'Orta',
                                                            'text-white bg-danger': task.onemDerecesi === 'Yüksek'
                                                        }">
                                                        {{ task.onemDerecesi }}
                                                    </div>
                                                </ng-container>

                                                <ng-container *ngIf="task.tag">
                                                    <div class="badge rounded-full capitalize"
                                                        [ngClass]="{
                                                            'text-white bg-success': task.tag === 'İyileştirme',
                                                            'text-white bg-info': task.tag === 'Geliştirme',
                                                            'text-white bg-danger': task.tag === 'Hata'
                                                        }">
                                                        {{ task.tag }}
                                                    </div>
                                                </ng-container>

                                            </div>
                                        </td>
                                        <td class="w-1">
                                            <p class="whitespace-nowrap font-medium text-white-dark dark:text-gray-300"
                                                [ngClass]="{ 'line-through': task.statu === 'Tamamlandı' }">
                                                {{ task.olusturmaTarihi ? (task.olusturmaTarihi | date: 'dd/MM/yyyy HH:mm') : '' }}
                                            </p>
                                        </td>
                                        <td class="w-1">
                                            <div class="flex w-max items-center justify-between">
                                                <div class="flex-shrink-0 ltr:mr-2.5 rtl:ml-2.5">
                                                    <div *ngIf="task.path">
                                                        <img [src]="'/assets/images/'+task.path"
                                                            class="h-8 w-8 rounded-full object-cover" alt="avatar" />
                                                    </div>
                                                    <div *ngIf="!task.path && task.assignee"
                                                        class="grid h-8 w-8 place-content-center rounded-full bg-primary text-sm font-semibold text-white">
                                                        {{ task.assignee.charAt(0) + '' +
                                                        task.assignee.charAt(task.assignee.indexOf(' ') + 1) }}
                                                    </div>
                                                    <div *ngIf="!task.path && !task.assignee"
                                                        class="grid h-8 w-8 place-content-center rounded-full border border-gray-300 dark:border-gray-600">
                                                        <icon-user class="w-4.5 h-4.5 dark:text-gray-200" />
                                                    </div>
                                                </div>
                                                <div hlMenu class="dropdown"
                                                    *ngIf="selectedTab === 'Bana Atanan' || selectedTab === 'trash' || userRole === 'admin'">
                                                    <a hlMenuButton href="javascript:;" class="dark:text-gray-200">
                                                        <icon-horizontal-dots class="rotate-90 opacity-70" />
                                                    </a>
                                                    <ul *hlMenuItems @toggleAnimation
                                                        class="w-max ltr:right-0 rtl:left-0 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700">
                                                        <ng-container>
                                                            <li>
                                                                <a href="javascript:;" *hlMenuItem="let menuItem"
                                                                    (click)="addEditTask(task)"
                                                                    class="hover:bg-white-dark/10 dark:hover:bg-gray-700">
                                                                    <icon-pencil-paper class="w-4.5 h-4.5 ltr:mr-2 rtl:ml-2 shrink-0" />
                                                                    {{ 'edit' | translate }}
                                                                </a>
                                                            </li>
                                                            <li>
                                                                <a href="javascript:;" *hlMenuItem="let menuItem"
                                                                    (click)="deleteTask(task, 'delete')"
                                                                    class="hover:bg-white-dark/10 dark:hover:bg-gray-700">
                                                                    <icon-trash-lines
                                                                        class="ltr:mr-2 rtl:ml-2 shrink-0" />
                                                                    {{ 'delete' | translate }}
                                                                </a>
                                                            </li>
                                                        </ng-container>
                                                        <ng-container *ngIf="selectedTab === 'trash'">
                                                            <li>
                                                                <a href="javascript:;" *hlMenuItem="let menuItem"
                                                                    (click)="deleteTask(task, 'deletePermanent')"
                                                                    class="hover:bg-white-dark/10 dark:hover:bg-gray-700">
                                                                    <icon-trash-lines
                                                                        class="ltr:mr-2 rtl:ml-2 shrink-0" />
                                                                    Permanent Delete
                                                                </a>
                                                            </li>
                                                            <li>
                                                                <a href="javascript:;" *hlMenuItem="let menuItem"
                                                                    (click)="deleteTask(task, 'restore')"
                                                                    class="hover:bg-white-dark/10 dark:hover:bg-gray-700">
                                                                    <icon-restore class="ltr:mr-2 rtl:ml-2 shrink-0" />
                                                                    Restore Task
                                                                </a>
                                                            </li>
                                                        </ng-container>
                                                    </ul>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </ng-container>
                            </tbody>
                        </table>
                    </div>
                </ng-container>
                <ng-container *ngIf="!pagedTasks.length">
                    <div class="flex h-full min-h-[400px] items-center justify-center text-lg font-semibold sm:min-h-[300px] dark:text-gray-300">
                        No data available
                    </div>
                </ng-container>
            </div>
        </div>
    </div>

    <!-- Add/Edit Task Modal -->
    <ngx-custom-modal #addTaskModal class="no-footer">
        <ng-template #modalHeader>
            <div class="!font-medium dark:text-gray-100">{{ params.value.id ? ('edittask' | translate) : ('addtask' | translate) }}</div>
        </ng-template>
        <ng-template #modalBody>
            <form [formGroup]="params" class="text-sm dark:text-gray-200" (ngSubmit)="saveTask()">
                <div class="mb-5">
                    <label for="title" class="dark:text-gray-200">{{ 'title' | translate }}</label>
                    <input id="title" type="text" placeholder="{{ 'entertasktitle' | translate }}" class="form-input dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        formControlName="title" />
                </div>
                <div class="form-group mb-5">
                    <label class="dark:text-gray-200">{{ 'Personel' | translate }}</label>
                    <ng-select [items]="allPersonal" bindLabel="kullaniciAdsoyad" bindValue="_id"
                        formControlName="atananUserID" [multiple]="true"
                        placeholder="{{ 'Select Personal' | translate }}" class="custom-multiselect mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                    </ng-select>
                </div>
                <div class="mb-5 flex justify-between gap-4">
                    <div class="flex-1">
                        <label for="tag" class="dark:text-gray-200">{{ 'tag' | translate }}</label>
                        <select id="tag" class="form-select dark:bg-gray-700 dark:border-gray-600 dark:text-white" formControlName="tag">
                            <option value="">{{ 'selecttag' | translate }}</option>
                            <option value="Hata">Hata</option>
                            <option value="Geliştirme">Geliştirme</option>
                            <option value="İyileştirme">İyileştirme</option>
                        </select>
                    </div>
                    <div class="flex-1">
                        <label for="onemDerecesi" class="dark:text-gray-200">{{ 'priority' | translate }}</label>
                        <select id="onemDerecesi" class="form-select dark:bg-gray-700 dark:border-gray-600 dark:text-white" formControlName="onemDerecesi">
                            <option value="">{{ 'selectpriority' | translate }}</option>
                            <option value="Düşük">Düşük</option>
                            <option value="Orta">Orta</option>
                            <option value="Yüksek">Yüksek</option>
                        </select>
                    </div>
                </div>
                <div class="mb-5">
                    <label for="hedefTarihi" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
                        {{ 'targetDate' | translate }}
                    </label>
                    <input id="hedefTarihi" type="datetime-local" formControlName="hedefTarihi"
                        class="form-input mt-2 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white" />
                </div>

                <div class="mb-5" *ngIf="params.value.id">
                    <div class="flex-1">
                        <label for="statu" class="dark:text-gray-200">{{ 'statu' | translate }}</label>
                        <select id="statu" class="form-select dark:bg-gray-700 dark:border-gray-600 dark:text-white" formControlName="statu">
                            <option value="">{{ 'Select Statu' | translate }}</option>
                            <option value="Yeni Açıldı">Yeni Açıldı</option>
                            <option value="Test">Test</option>
                            <option value="Tamamlandı">Tamamlandı</option>
                            <option value="İptal Edildi">İptal Edildi</option>
                        </select>
                    </div>
                </div>
                <div class="mb-5">
                    <label for="aciklama" class="block text-sm font-medium text-gray-700 dark:text-gray-200">Açıklama</label>
                    <textarea id="aciklama" formControlName="aciklama" placeholder="Açıklamanızı buraya yazın..."
                        class="w-full mt-2 p-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white dark:focus:ring-blue-300"
                        rows="5"></textarea>
                </div>
                <div class="mt-8 flex items-center justify-end ltr:text-right rtl:text-left">
                    <button type="button" class="btn btn-outline-danger" (click)="addTaskModal.close()">{{ 'CANCEL' |
                        translate }}</button>
                    <button type="submit" class="btn btn-primary ltr:ml-4 rtl:mr-4">{{ params.value.id ? ('UPDATE' |
                        translate) : ('ADD' | translate) }}</button>
                </div>
            </form>
        </ng-template>
    </ngx-custom-modal>

    <ngx-custom-modal #viewTaskModal class="no-footer bg-gray-100 dark:bg-gray-900 rounded-lg p-6 shadow-lg">
        <ng-template #modalHeader>
            <div class="flex flex-wrap items-center gap-4 text-xl font-semibold text-gray-800 dark:text-white">
                <div class="flex-grow">{{ selectedTask.title }}</div>
                <div *ngIf="selectedTask.onemDerecesi" class="badge rounded-3xl px-3 py-1 text-sm font-medium"
                    [ngClass]="{
                        'badge-outline-primary bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200': selectedTask.onemDerecesi === 'Orta',
                        'badge-outline-success bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200': selectedTask.onemDerecesi === 'Düşük',
                        'badge-outline-danger bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200': selectedTask.onemDerecesi === 'Yüksek'
                    }">
                    {{ selectedTask.onemDerecesi }}
                </div>

                <div *ngIf="selectedTask.tag" class="badge rounded-3xl px-3 py-1 text-sm font-medium" [ngClass]="{
                        'badge-outline-success bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200': selectedTask.tag === 'İyileştirme',
                        'badge-outline-info bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200': selectedTask.tag === 'Geliştirme',
                        'badge-outline-danger bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200': selectedTask.tag === 'Hata'
                    }">
                    {{ selectedTask.tag }}
                </div>
            </div>
        </ng-template>

        <ng-template #modalBody>
            <div class="prose text-base text-gray-700 dark:text-gray-300 mb-6">
                <strong>Oluşturan:</strong>
                <span class="block ml-2 text-gray-900 dark:text-gray-100"
                    [innerHTML]="selectedTask.olusturanUserName"></span>
            </div>

            <div class="prose text-base text-gray-700 dark:text-gray-300 mb-6">
                <strong>Atanan Kullanıcılar:</strong>
                <ul class="list-disc pl-6 mt-2 text-gray-900 dark:text-gray-100">
                    <li *ngFor="let userName of selectedTask.atananUserNames" [innerHTML]="userName"></li>
                </ul>
            </div>

            <div class="prose text-base text-gray-700 dark:text-gray-300 mb-6">
                <strong>Açıklama:</strong>
                <p class="mt-2 text-gray-900 dark:text-gray-100" [innerHTML]="selectedTask.aciklama"></p>
            </div>

            <div class="prose text-base text-gray-700 dark:text-gray-300 mb-6">
                <strong>Oluşturma Tarihi:</strong>
                <p class="mt-2 text-gray-900 dark:text-gray-100">
                    {{ selectedTask!.olusturmaTarihi | date: 'dd/MM/yyyy HH:mm' }}
                </p>
            </div>

            <div class="prose text-base text-gray-700 dark:text-gray-300 mb-6">
                <strong>Güncelleme Tarihi:</strong>
                <p class="mt-2 text-gray-900 dark:text-gray-100">
                    {{ selectedTask.guncellemeTarihi | date: 'dd/MM/yyyy HH:mm' }}
                </p>
            </div>

            <div class="prose text-base text-gray-700 dark:text-gray-300 mb-6">
                <strong>Hedef Tarihi:</strong>
                <p class="mt-2 text-gray-900 dark:text-gray-100">
                    {{ selectedTask.hedefTarihi | date: 'dd/MM/yyyy HH:mm' }}
                </p>
            </div>

            <div class="flex items-center justify-end pt-4 border-t border-gray-300 dark:border-gray-700">
                <button type="button"
                    class="btn btn-outline-danger text-red-500 hover:bg-red-500 hover:text-white transition duration-200"
                    (click)="viewTaskModal.close()">Kapat</button>
            </div>
        </ng-template>
    </ngx-custom-modal>
</div>
