<div>
    <ul class="flex space-x-2 rtl:space-x-reverse">
        <li>
            <a href="javascript:;" class="text-primary hover:underline">{{ 'users' | translate }}</a>
        </li>
        <li class="before:content-['/'] ltr:before:mr-2 rtl:before:ml-2">
            <span>{{ 'account_settings' | translate }}</span>
        </li>
    </ul>
    <div class="pt-5">
        <div class="mb-5 flex items-center justify-between">
            <h5 class="text-lg font-semibold dark:text-white-light">{{ 'SETTINGS' | translate }}</h5>
        </div>

        <!-- Sekme Seçici -->
        <div class="mb-5 flex overflow-y-auto whitespace-nowrap border-b border-[#ebedf2] font-semibold dark:border-[#191e3a]">
            <a href="javascript:;"
               class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary"
               [ngClass]="{ '!border-primary text-primary':  activeTab.toLowerCase() === 'home'}"
               (click)="activeTab = 'home'">
                <icon-home />
                {{ 'generalsettings' | translate }}
            </a>
            <a href="javascript:;"
               class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary"
               [ngClass]="{ '!border-primary text-primary':  activeTab.toLowerCase() === 'payment-detail'}"
               (click)="activeTab = 'payment-detail'">
                <icon-dollar-sign-circle />
                {{ 'paymentdetails' | translate }}
            </a>
            <a href="javascript:;"
               class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary"
               [ngClass]="{ '!border-primary text-primary':  activeTab.toLowerCase() === 'ekran'}"
               (click)="activeTab = 'ekran'">
                <icon-home />
                {{ 'Ayarlar' | translate }}
            </a>
            <a href="javascript:;"
               class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary"
               [ngClass]="{ '!border-primary text-primary':  activeTab.toLowerCase() === 'preferences'}"
               (click)="activeTab = 'preferences'">
                <icon-user class="h-5 w-5" />
                {{ 'usermanagement' | translate }}
            </a>
            <a href="javascript:;"
               class="flex gap-2 border-b border-transparent p-4 !outline-none hover:border-primary hover:text-primary"
               [ngClass]="{ '!border-primary text-primary':  activeTab.toLowerCase() === 'danger-zone'}"
               (click)="activeTab = 'danger-zone'">
                <icon-phone />
                {{ 'account_settings' | translate }}
            </a>
        </div>

        <!-- İçerik Alanı -->
        <div>
            <!-- Genel Ayarlar -->
            <div *ngIf="activeTab.toLowerCase() === 'home'">
                <form
                    class="mb-5 rounded-md border border-[#ebedf2] bg-white p-4 dark:border-[#191e3a] dark:bg-[#0e1726]"
                    (ngSubmit)="updateProfile()">
                    <h6 class="mb-5 text-lg font-bold dark:text-white-light">{{ 'generalinformation' | translate }}</h6>
                    <div class="flex flex-col sm:flex-row">
                        <div class="mb-5 w-full sm:w-2/12 ltr:sm:mr-4 rtl:sm:ml-4">
                            <img [src]="user?.avatar ? ('data:image/jpeg;base64,' + user?.avatar) : '/assets/images/profile-34.jpeg'"
                                 alt="Profile Picture"
                                 class="mx-auto h-20 w-20 rounded-full object-cover md:h-32 md:w-32"
                                 (click)="onImageClick()" />
                            <input type="file" accept="image/*" (change)="onFileChange($event)" style="display: none;" #fileInput />
                        </div>
                        <div class="grid flex-1 grid-cols-1 gap-5 sm:grid-cols-2">
                            <div *ngIf="user">
                                <label for="name" class="dark:text-white-light">{{ 'username' | translate }}</label>
                                <input id="name" type="text" [placeholder]="user.kullaniciAdi || 'Jimmy Turner'"
                                       [(ngModel)]="user.kullaniciAdi" name="name" class="form-input" readonly />
                            </div>
                            <div *ngIf="user?.faturaBilgileri">
                                <label for="address" class="dark:text-white-light">{{ 'ADDRESS' | translate }}</label>
                                <input id="address" type="text"
                                       [placeholder]="user?.faturaBilgileri.adres || 'New York'"
                                       [(ngModel)]="user.faturaBilgileri.adres" name="address" class="form-input" />
                            </div>
                            <div *ngIf="user">
                                <label for="phone" class="dark:text-white-light">{{ 'PHONE' | translate }}</label>
                                <input id="phone" type="text" [placeholder]="user.telefon || '+1 (530) 555-12121'"
                                       [(ngModel)]="user.telefon" name="phone" class="form-input" />
                            </div>
                            <div *ngIf="user">
                                <label for="email" class="dark:text-white-light">{{ 'email' | translate }}</label>
                                <input id="email" type="email" [placeholder]="user.email || 'Jimmy@gmail.com'"
                                       [(ngModel)]="user.email" name="email" class="form-input" />
                            </div>
                            <div class="mt-3 sm:col-span-2 flex justify-end">
                                <button type="submit" class="btn btn-primary flex items-center">
                                    <icon-save class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-save>
                                    {{ 'save' | translate }}
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
                <!-- Sosyal Bilgiler -->
                <form class="rounded-md border border-[#ebedf2] bg-white p-4 dark:border-[#191e3a] dark:bg-[#0e1726]">
                    <h6 class="mb-5 text-lg font-bold dark:text-white-light">{{ 'social' | translate }}</h6>
                    <div class="grid grid-cols-1 gap-5 sm:grid-cols-2">
                        <div class="flex items-center">
                            <div class="flex items-center justify-center rounded bg-[#eee] px-3 font-semibold dark:bg-[#1b2e4b] ltr:mr-2 rtl:ml-2">
                                <icon-linkedin class="h-5 w-5" />
                            </div>
                            <input type="text" placeholder="jimmy_turner" class="form-input" />
                        </div>
                        <div class="flex items-center">
                            <div class="flex items-center justify-center rounded bg-[#eee] px-3 font-semibold dark:bg-[#1b2e4b] ltr:mr-2 rtl:ml-2">
                                <icon-twitter class="h-5 w-5" />
                            </div>
                            <input type="text" placeholder="jimmy_turner" class="form-input" />
                        </div>
                        <div class="flex items-center">
                            <div class="flex items-center justify-center rounded bg-[#eee] px-3 font-semibold dark:bg-[#1b2e4b] ltr:mr-2 rtl:ml-2">
                                <icon-facebook class="h-5 w-5" />
                            </div>
                            <input type="text" placeholder="jimmy_turner" class="form-input" />
                        </div>
                        <div class="flex items-center">
                            <div class="flex items-center justify-center rounded bg-[#eee] px-3 font-semibold dark:bg-[#1b2e4b] ltr:mr-2 rtl:ml-2">
                                <icon-github class="h-5 w-5" />
                            </div>
                            <input type="text" placeholder="jimmy_turner" class="form-input" />
                        </div>
                    </div>
                </form>
            </div>

            <!-- Payment Detail -->
            <div *ngIf="activeTab.toLowerCase() === 'payment-detail'">
                <div class="mb-5 grid grid-cols-1 md:grid-cols-2 gap-5">

                    <!-- Billing Address Panel -->
                    <div class="panel dark:bg-gray-800 dark:text-white-light">
                        <div class="mb-5">
                            <h5 class="mb-4 text-lg font-semibold dark:text-white-light">{{ 'billingaddress' | translate }}</h5>
                            <p class="dark:text-gray-300">
                                o your <span class="text-primary">Billing</span> information will take
                                effect starting with scheduled payment and will be reflected on your next invoice.
                            </p>
                        </div>
                        <div *ngFor="let address of addresses" class="mb-5">
                            <div class="border-b border-[#ebedf2] dark:border-[#1b2e4b]">
                                <div class="flex items-start justify-between py-3">
                                    <h6 class="text-[15px] font-bold text-[#515365] dark:text-white-dark">
                                        {{ address.address }}
                                        <span
                                            class="mt-1 block text-xs font-normal text-white-dark dark:text-white-light">{{ address.city }}, {{ address.state }}</span>
                                    </h6>
                                    <div class="flex items-start justify-between ltr:ml-auto rtl:mr-auto">
                                        <button class="btn btn-dark" (click)="openAddEditAddressModal(address)">{{ 'EDIT' | translate }}</button>
                                        <button class="btn btn-outline-danger ltr:ml-3 rtl:mr-3"
                                            (click)="deleteAddress(address.id)">{{ 'delete' | translate }}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" (click)="openAddEditAddressModal()">{{ 'addaddress' | translate }}</button>
                    </div>


                    <!-- Payment Method Panel -->
                    <div class="panel dark:bg-gray-800 dark:text-white-light">
                        <div class="mb-5">
                            <h5 class="mb-4 text-lg font-semibold dark:text-white-light">{{ 'paymenthistory' | translate }}</h5>
                            <p class="dark:text-gray-300">
                                Changes to your <span class="text-primary">{{ 'paymentmethod' | translate }}</span>
                                information will take effect starting with scheduled payment and will be refelected on
                                your next invoice.
                            </p>
                        </div>
                        <div class="mb-5">
                            <div *ngFor="let payment of paymentMethods"
                                class="border-b border-[#ebedf2] dark:border-[#1b2e4b]">
                                <div class="flex items-start justify-between py-3">
                                    <div class="flex-none ltr:mr-4 rtl:ml-4">
                                        <img [src]="getCardImage(payment.cardType)" alt="{{ payment.cardType }} Card" />
                                    </div>
                                    <h6 class="text-[15px] font-bold text-[#515365] dark:text-white-dark">
                                        {{ payment.cardType }}
                                        <span
                                            class="mt-1 block text-xs font-normal text-white-dark dark:text-white-light">
                                            XXXX XXXX XXXX {{ payment.cardNumber.slice(-4) }}
                                        </span>
                                    </h6>
                                    <div class="flex items-start justify-between ltr:ml-auto rtl:mr-auto">
                                        <button class="btn btn-dark" (click)="editPaymentMethod(payment)">{{ 'EDIT' |
                                            translate }}</button>
                                        <button type="button" (click)="deletePaymentMethod(payment._id)"
                                            class="btn btn-outline-danger ltr:ml-2 rtl:mr-2">{{ 'delete' | translate
                                            }}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" (click)="openAddPaymentMethodModal()">{{ 'addpaymentmethod' |
                            translate }}</button>
                    </div>
                    <ngx-custom-modal #modalAddEditBillingAddress customClass="modal-top dark:bg-gray-800">
                        <ng-template #modalHeader>
                            <div *ngIf="isEditMode; else addMode" class="dark:text-white-light">{{ 'editbillingaddress' | translate }}</div>
                            <ng-template #addMode>{{ 'addnewbillingaddress' | translate }}</ng-template>
                        </ng-template>
                        <ng-template #modalBody>
                            <form [formGroup]="billingAddressForm">
                                <div class="relative mb-4">
                                    <label for="addressName" class="dark:text-white-light">{{ 'addressname' | translate }}</label>
                                    <input type="text" id="addressName" formControlName="addressName" class="form-input"
                                        required />
                                    <div *ngIf="billingAddressForm.get('addressName')?.invalid && billingAddressForm.get('addressName')?.touched"
                                        class="error-text text-red-500">
                                        {{ 'addressnameisrequired' | translate }}
                                    </div>
                                </div>
                                <div class="relative mb-4">
                                    <label for="address" class="dark:text-white-light">{{ 'address' | translate }}</label>
                                    <input type="text" id="address" formControlName="address" class="form-input"
                                        required />
                                    <div *ngIf="billingAddressForm.get('address')?.invalid && billingAddressForm.get('address')?.touched"
                                        class="error-text text-red-500">
                                        {{ 'addressisrequired' | translate }}
                                    </div>
                                </div>
                                <div class="relative mb-4">
                                    <label for="city" class="dark:text-white-light">{{ 'city' | translate }}</label>
                                    <input type="text" id="city" formControlName="city" class="form-input" required />
                                    <div *ngIf="billingAddressForm.get('city')?.invalid && billingAddressForm.get('city')?.touched"
                                        class="error-text text-red-500">
                                        {{ 'cityisrequired' | translate }}
                                    </div>
                                </div>
                                <div class="relative mb-4">
                                    <label for="state" class="dark:text-white-light">{{ 'state' | translate }}</label>
                                    <input type="text" id="state" formControlName="state" class="form-input" required />
                                    <div *ngIf="billingAddressForm.get('state')?.invalid && billingAddressForm.get('state')?.touched"
                                        class="error-text text-red-500">
                                        {{ 'stateisrequired' | translate }}
                                    </div>
                                </div>
                            </form>
                        </ng-template>
                        <ng-template #modalFooter>
                            <button type="button" (click)="closeAddEditBillingAddressModal()"
                                class="btn btn-outline-danger">{{ 'CANCEL' | translate }}</button>
                            <button type="button" (click)="saveBillingAddress()" [disabled]="billingAddressForm.invalid"
                                class="btn btn-primary ltr:ml-4 rtl:mr-4">
                                {{ 'save' | translate }}
                            </button>
                        </ng-template>
                    </ngx-custom-modal>
                </div>
            </div>
            <!-- Modal -->
            <ngx-custom-modal #modalAddPaymentMethod customClass="modal-top dark:bg-gray-800">
                <ng-template #modalHeader>
                    <div *ngIf="isEditing" class="dark:text-white-light">{{ 'editpaymentmethod' | translate }}</div>
                    <div *ngIf="!isEditing" class="dark:text-white-light">{{ 'addnewpaymentmethod' | translate }}</div>
                </ng-template>
                <ng-template #modalBody>
                    <form [formGroup]="paymentMethodForm">
                        <div class="relative mb-4">
                            <label for="cardType" class="dark:text-white-light">{{ 'cardtype' | translate }}</label>
                            <select id="cardType" formControlName="cardType" class="form-input" required>
                                <option value="Mastercard">Mastercard</option>
                                <option value="Visa">Visa</option>
                                <option value="American Express">American Express</option>
                                <option value="Discover">Discover</option>
                            </select>
                            <div *ngIf="paymentMethodForm.get('cardType')?.invalid && paymentMethodForm.get('cardType')?.touched"
                                class="error-text text-red-500">
                                {{ 'cardtypeisrequired' | translate }}
                            </div>
                        </div>
                        <div class="relative mb-4">
                            <label for="cardNumber" class="dark:text-white-light">{{ 'cardnumber' | translate }}</label>
                            <input type="text" id="cardNumber" formControlName="cardNumber" mask="0000 0000 0000 0000"
                                placeholder="XXXX XXXX XXXX XXXX" class="form-input" required />
                            <div *ngIf="paymentMethodForm.get('cardNumber')?.invalid && paymentMethodForm.get('cardNumber')?.touched"
                                class="error-text text-red-500">
                                {{ 'cardnumbermustbevalidformat' | translate }}
                            </div>
                        </div>
                        <div class="relative mb-4">
                            <label for="cardHolderName" class="dark:text-white-light"> {{ 'cardholdername' | translate }}</label>
                            <input type="text" id="cardHolderName" formControlName="cardHolderName" class="form-input"
                                required />
                            <div *ngIf="paymentMethodForm.get('cardHolderName')?.invalid && paymentMethodForm.get('cardHolderName')?.touched"
                                class="error-text text-red-500">
                                {{ 'cardholdernameisrequired' | translate }}
                            </div>
                        </div>
                        <div class="relative mb-4">
                            <label for="expiryDate" class="dark:text-white-light"> {{ 'expirydate' | translate }}</label>
                            <input type="text" id="expiryDate" formControlName="expiryDate" mask="00/00"
                                placeholder="MM/YY" class="form-input" required />
                            <div *ngIf="paymentMethodForm.get('expiryDate')?.invalid && paymentMethodForm.get('expiryDate')?.touched"
                                class="error-text text-red-500">
                                {{ 'expirydatemustbevalidformat' | translate }}
                            </div>
                        </div>
                        <div class="relative mb-4">
                            <label for="billingAddress" class="dark:text-white-light"> {{ 'billingaddress' | translate }}</label>
                            <input type="text" id="billingAddress" formControlName="billingAddress" class="form-input"
                                required />
                            <div *ngIf="paymentMethodForm.get('billingAddress')?.invalid && paymentMethodForm.get('billingAddress')?.touched"
                                class="error-text text-red-500">
                                {{ 'billingaddressisrequired' | translate }}
                            </div>
                        </div>
                        <div class="relative mb-4 dark:text-white-light">
                            <label for="isDefault">{{ 'setasdefault' | translate }}</label>
                            <input type="checkbox" id="isDefault" formControlName="isDefault" />
                        </div>
                    </form>
                </ng-template>
                <ng-template #modalFooter>
                    <button type="button" (click)="closeAddPaymentMethodModal()" class="btn btn-outline-danger">{{
                        'cancel' | translate }}</button>
                    <button type="button" (click)="savePaymentMethod()" [disabled]="paymentMethodForm.invalid"
                        class="btn btn-primary ltr:ml-4 rtl:mr-4">
                        {{ 'save' | translate }}
                    </button>
                </ng-template>
            </ngx-custom-modal>




            <div *ngIf="activeTab.toLowerCase() === 'ekran'" class="switch">
                <div class="mb-5 space-y-5">
                    <div class="panel p-4 dark:bg-gray-800 dark:text-white-light">
                        <h5 class="mb-4 text-lg font-semibold dark:text-white-light">Ayarlar</h5>

                        <!-- Para birimi seçimi -->
                        <div class="flex items-center gap-4 mb-4">
                            <label for="currency" class="text-sm font-medium text-gray-700 dark:text-white-light whitespace-nowrap">
                                Kullanılacak Para Birimi:
                            </label>
                            <div class="relative w-full max-w-xs">
                                <select id="currency" [(ngModel)]="currency.currency" (change)="changeCurrency($event)"
                                    class="block w-full px-4 py-2 pr-8 text-sm border border-gray-300 rounded-lg shadow-sm bg-white dark:bg-gray-700 dark:border-gray-500 dark:text-white focus:ring-primary focus:border-primary">
                                    <option value="TRY">Türk Lirası (₺)</option>
                                    <option value="USD">Amerikan Doları ($)</option>
                                    <option value="EUR">Euro (€)</option>
                                </select>
                                <span class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none">
                                    <svg class="w-5 h-5 text-gray-500 dark:text-gray-300" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7" />
                                    </svg>
                                </span>
                            </div>
                        </div>

                        <!-- Kullanıcı Ayarları -->
                        <div class="flex flex-wrap gap-4">
                            <div *ngFor="let setting of userSettings" class="w-full md:w-1/2 lg:w-1/3 p-2">
                                <div class="panel p-4 flex items-center justify-between border rounded-lg shadow-sm dark:bg-gray-700 dark:border-gray-600">
                                    <div>
                                        <h5 class="text-lg font-semibold dark:text-white-light">{{ setting.displayName }}</h5>
                                        <p class="text-sm text-gray-500 dark:text-gray-300">{{ setting.description }}</p>
                                    </div>
                                    <label class="relative h-6 w-12 ml-4">
                                        <input type="checkbox"
                                            class="custom_switch peer absolute z-10 h-full w-full cursor-pointer opacity-0"
                                            [(ngModel)]="setting.value"
                                            (change)="toggleSetting(setting.key, setting.value)" />
                                        <span
                                            class="block h-full rounded-full bg-gray-300 dark:bg-gray-600 before:absolute before:bottom-1 before:left-1 before:h-4 before:w-4 before:rounded-full before:bg-white dark:before:bg-gray-200 before:transition-all before:duration-300 peer-checked:bg-primary peer-checked:before:left-7"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div *ngIf="activeTab.toLowerCase() === 'preferences'" class="switch">
                <div class="mb-5 grid grid-cols-1 gap-5">

                    <!-- Kullanıcı Yönetimi Paneli -->
                    <div class="panel dark:bg-gray-800 dark:text-white-light">
                        <div class="mb-5">
                            <h5 class="text-lg font-semibold dark:text-white-light">{{ 'usermanagement' | translate }}
                            </h5>
                        </div>

                        <div class="rounded border border-[#d3d3d3] dark:border-[#1b2e4b]">
                            <button type="button" class="flex w-full items-center p-4 text-white-dark dark:bg-[#1b2e4b]"
                                [ngClass]="{ '!text-primary': accordians3 === 1 }"
                                (click)="accordians3 === 1 ? (accordians3 = null) : (accordians3 = 1)">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="h-5 w-5 shrink-0 text-primary ltr:mr-2 rtl:ml-2">
                                    <path opacity="0.5"
                                        d="M7.142 18.9706C5.18539 18.8995 3.99998 18.6568 3.17157 17.8284C2 16.6569 2 14.7712 2 11C2 7.22876 2 5.34315 3.17157 4.17157C4.34315 3 6.22876 3 10 3H14C17.7712 3 19.6569 3 20.8284 4.17157C22 5.34315 22 7.22876 22 11C22 14.7712 22 16.6569 20.8284 17.8284C20.0203 18.6366 18.8723 18.8873 17 18.965"
                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                    <path
                                        d="M9.94955 16.0503C10.8806 15.1192 11.3461 14.6537 11.9209 14.6234C11.9735 14.6206 12.0261 14.6206 12.0787 14.6234C12.6535 14.6537 13.119 15.1192 14.0501 16.0503C16.0759 18.0761 17.0888 19.089 16.8053 19.963C16.7809 20.0381 16.7506 20.1112 16.7147 20.1815C16.2973 21 14.8648 21 11.9998 21C9.13482 21 7.70233 21 7.28489 20.1815C7.249 20.1112 7.21873 20.0381 7.19436 19.963C6.91078 19.089 7.92371 18.0761 9.94955 16.0503Z"
                                        stroke="currentColor" stroke-width="1.5" />
                                </svg>
                                <span>{{ isEditMode ? 'edituser' : 'addnewuser' | translate }}</span>
                            </button>
                        </div>

                        <div *ngIf="accordians3 === 1" class="accordion-content">
                            <form [formGroup]="userForm" class="p-4 dark:text-white-light">
                                <div class="space-y-4">
                                    <div class="form-group">
                                        <label class="font-medium dark:text-white-light">{{ 'username' | translate }}<span style="color:red;">*</span></label>
                                        <input type="text" formControlName="kullaniciAdi"
                                            class="form-input mt-1 block w-full" required />
                                    </div>
                                    <div class="form-group">
                                        <label class="font-medium dark:text-white-light">{{ 'enternameadsoyad' | translate }}<span style="color:red;">*</span></label>
                                        <input type="text" formControlName="kullaniciAdsoyad"
                                            class="form-input mt-1 block w-full" required />
                                    </div>
                                    <div class="form-group">
                                        <label class="dark:text-white-light">{{ 'password' | translate }}<span style="color:red;">*</span></label>
                                        <input type="password" formControlName="sifre"
                                            class="form-control form-input mt-1 block w-full"
                                            [value]="editingUserId ? '********' : ''" (focus)="onPasswordFieldFocus()"
                                            placeholder="Şifreyi girin veya değiştirmeyin" />
                                        <small class="text-muted dark:text-gray-300" *ngIf="editingUserId">{{ 'clicktonewpassword' |
                                            translate }}</small>
                                    </div>
                                    <div class="form-group">
                                        <label class="font-medium dark:text-white-light">{{ 'email' | translate }}<span style="color:red;">*</span></label>
                                        <div class="flex flex-1">
                                            <div
                                                class="flex items-center justify-center border border-[#e0e6ed] bg-[#eee] px-3 font-semibold dark:border-[#17263c] dark:bg-[#1b2e4b] ltr:rounded-l-md ltr:border-r-0 rtl:rounded-r-md rtl:border-l-0">
                                                {{"@"}}
                                            </div>
                                            <input type="email" formControlName="email"
                                                class="form-input ltr:rounded-l-none rtl:rounded-r-none mt-1 block w-full"
                                                required />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="font-medium dark:text-white-light">{{ 'phone' | translate }}<span style="color:red;">*</span></label>
                                        <input id="telefon" type="text" formControlName="telefon"
                                            placeholder="(___) ___-____" class="form-input mt-1 block w-full"
                                            [textMask]="{ mask: mask12 }" required />
                                    </div>
                                    <div class="form-group">
                                        <label class="font-medium dark:text-white-light">{{ 'Magaza' | translate }}<span style="color:red;">*</span></label>
                                        <ng-select [items]="magazalar" bindLabel="magazaAdi" bindValue="_id"
                                            formControlName="magaza" [multiple]="true"
                                            placeholder="{{ 'Select Stores' | translate }}"
                                            class="custom-multiselect mt-1 block w-full dark:bg-gray-700 dark:text-white">
                                        </ng-select>
                                    </div>

                                    <div class="form-group">
                                        <label class="font-medium dark:text-white-light">{{ 'role' | translate }}<span style="color:red;">*</span></label>
                                        <div class="flex items-center gap-2">
                                            <select formControlName="role" class="form-select mt-1 block w-full dark:bg-gray-700 dark:text-white">
                                                <option *ngFor="let role of roles" [value]="role._id">{{ role.name }}
                                                </option>
                                            </select>

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="font-medium dark:text-white-light">{{ 'Aktif' | translate }}<span style="color:red;">*</span></label>
                                        <label class="relative h-6 w-12">
                                            <input type="checkbox" formControlName="aktif"
                                                class="custom_switch peer absolute z-10 h-full w-full cursor-pointer opacity-0" />
                                            <span
                                                class="block h-full rounded-full bg-[#ebedf2] dark:bg-gray-600 before:absolute before:bottom-1 before:left-1 before:h-4 before:w-4 before:rounded-full before:bg-white dark:before:bg-gray-200 before:transition-all before:duration-300 peer-checked:bg-primary peer-checked:before:left-7"></span>
                                        </label>
                                    </div>
                                    <div class="form-group flex justify-end space-x-2 mt-4">
                                        <button type="button" class="btn btn-success px-6 py-2 flex items-center"
                                            (click)="saveUser()" [disabled]="userForm.invalid" *ngIf="editingUserId">
                                            <icon-pencil class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-pencil>
                                            {{ 'update' | translate }}
                                        </button>
                                        <button type="button" class="btn btn-primary px-6 py-2 flex items-center"
                                            (click)="saveUser()" [disabled]="userForm.invalid" *ngIf="!editingUserId">
                                            <icon-save class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-save>
                                            {{ 'save' | translate }}
                                        </button>
                                        <button type="button" class="btn btn-secondary px-6 py-2 flex items-center"
                                            (click)="resetForm()">
                                            <icon-refresh class="h-5 w-5 shrink-0 ltr:mr-2 rtl:ml-2"></icon-refresh>

                                            {{ 'clearForm' | translate }}
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Kullanıcı Listesi -->
                    <div class="panel dark:bg-gray-800 dark:text-white-light">
                        <div class="mb-5 flex flex-wrap gap-5 md:flex-row md:items-center">
                            <h5 class="text-lg font-semibold dark:text-white-light">{{ 'userlist' | translate }}</h5>
                            <div class="flex items-center ltr:ml-auto rtl:mr-auto gap-4">
                                <input [(ngModel)]="searchTerm" type="text" placeholder="{{ 'search' | translate }}..."
                                    class="form-input w-64 dark:bg-gray-700 dark:text-white" />
                                <div class="relative w-64">
                                    <select [(ngModel)]="selectedRole" class="form-select dark:bg-gray-700 dark:text-white" (change)="applyFilter()">
                                        <option [value]="null">{{ 'allroles' | translate }}</option>
                                        <option *ngFor="let role of roles" [value]="role._id">{{ role.name }}</option>
                                    </select>
                                </div>
                                <div class="flex items-center gap-2">
                                    <label class="text-sm font-medium dark:text-white-light">{{ 'showpassives' | translate }}</label>
                                    <label class="relative h-4 w-8">
                                        <input type="checkbox"
                                            class="custom_switch peer absolute z-10 h-full w-full cursor-pointer opacity-0"
                                            [(ngModel)]="showPassive" (change)="applyFilter()" />
                                        <span
                                            class="block h-full rounded-full bg-[#ebedf2] dark:bg-gray-600 before:absolute before:bottom-0.5 before:left-0.5 before:h-3 before:w-3 before:rounded-full before:bg-white dark:before:bg-gray-200 before:transition-all before:duration-300 peer-checked:bg-primary peer-checked:before:left-4"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Kullanıcı Listesi Tablosu -->
                        <div class="datatable dark:text-white-light">
                            <ng-datatable [rows]="filteredUsers" [columns]="cols" [sortable]="true"
                                [search]="searchTerm" [pageSize]="itemsPerPage" [stickyHeader]="true"
                                class="whitespace-nowrap">

                                <ng-template slot="role" let-value="data">
                                    {{ value.role.name || 'No Role' }}
                                </ng-template>

                                <ng-template slot="aktif" let-value="data">
                                    {{ value.aktif ? 'Active' : 'Passive' }}
                                </ng-template>

                                <ng-template slot="magaza" let-value="data">
                                    {{ getMagazaNames(value.magaza) }}
                                </ng-template>

                                <ng-template slot="actions" let-value="data">
                                    <div class="flex items-center gap-2 justify-end">
                                        <button type="button" class="btn btn-warning rounded-full"
                                            (click)="editUser(value)">
                                            <icon-pencil class="h-5 w-5 shrink-0"></icon-pencil>
                                        </button>
                                    </div>
                                </ng-template>
                            </ng-datatable>
                        </div>

                    </div>
                </div>
            </div>

            <div *ngIf="activeTab.toLowerCase() === 'danger-zone'" class="switch">
                <div class="grid grid-cols-1 gap-5 md:grid-cols-3">
                    <div class="panel space-y-5 dark:bg-gray-800 dark:text-white-light">
                        <h5 class="mb-4 text-lg font-semibold dark:text-white-light">{{ 'purgecache' | translate }}</h5>
                        <p class="dark:text-gray-300">Remove the active resource from the cache without waiting for the predetermined cache expiry time.</p>
                        <button class="btn btn-secondary">{{ 'clear' | translate }}</button>
                    </div>
                    <div class="panel space-y-5 dark:bg-gray-800 dark:text-white-light">
                        <h5 class="mb-4 text-lg font-semibold dark:text-white-light">{{ 'deactivateaccount' | translate }}</h5>
                        <p class="dark:text-gray-300">You will not be able to receive messages, notifications for up to 24 hours.</p>
                        <label class="relative h-6 w-12">
                            <input type="checkbox"
                                class="custom_switch peer absolute z-10 h-full w-full cursor-pointer opacity-0"
                                id="custom_switch_checkbox7" />
                            <span for="custom_switch_checkbox7"
                                class="block h-full rounded-full bg-[#ebedf2] dark:bg-gray-600 before:absolute before:bottom-1 before:left-1 before:h-4 before:w-4 before:rounded-full before:bg-white dark:before:bg-gray-200 before:transition-all before:duration-300 peer-checked:bg-primary peer-checked:before:left-7"></span>
                        </label>
                    </div>
                    <div class="panel space-y-5 dark:bg-gray-800 dark:text-white-light">
                        <h5 class="mb-4 text-lg font-semibold dark:text-white-light">{{ 'deleteaccount' | translate }}</h5>
                        <p class="dark:text-gray-300">Once you delete the account, there is no going back. Please be certain.</p>
                        <button class="btn btn-danger btn-delete-account">{{ 'deletemyaccount' | translate
                            }}</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
